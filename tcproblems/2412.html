<html>
<head>
<title>Â Problem Statement for CircularSequence</title>
</head>
<body>
<table border="0" cellspacing="0" cellpadding="10" width="100%">
           <tr>
             <td valign="top" width="100%"><img src="/i/clear.gif" alt="" width="240" height="1" border="0"><br>
               <table border="0" cellspacing="0" cellpadding="0" width="100%">
                 <tr>
                   <td colspan="7"><img src="/i/clear.gif" alt="" width="1" height="1" border="0"></td>
                 </tr>
                 <tr>
                   <td colspan="7"><img src="/i/clear.gif" alt="" width="1" height="5" border="0"></td>
                 </tr>
                 <tr>
                   
                     <td background="/i/steel_gray_bg.gif" class="statTextBig" colspan="7" height="18">&#160;Problem Statement for CircularSequence</td>
                   
                 </tr>
                 <tr>
                   <td colspan="7"><img src="/i/clear.gif" alt="" width="1" height="1" border="0"></td>
                 </tr>
                 <tr>
                   <td colspan="7"><img src="/i/clear.gif" alt="" width="1" height="1" border="0"></td>
                 </tr>
                 <tr>
                   <td class="problemText" valign="middle" align="left">
                      
              		<table><tr><td colspan="2" class="statText"><h3>Problem Statement</h3></td></tr><tr><td class="statText">&#160;&#160;&#160;&#160;</td><td class="statText"><p><i>Plugin users: There is a picture in the problem statement.</i></p>

<p>
Given a circular sequence of integers, calculate the maximum sum of a (contiguous) sequence of these numbers. You should also calculate how many different sequences yield this maximum sum. Two sequences are different if they don't contain the same elements from the original sequence (see example 1). At least one integer in the circular sequence will be positive (greater than zero).
</p>

<p>
For instance, consider the circular sequence in the picture below.
</p>

<img src="http://172.16.100.16/contest/problem/CircularSequence/circularsequence.jpg">

<p>
There are four different ways
to select a sequence of integers so the sum becomes 19 (which is the maximum sum):
</p>

<pre>
0 3 2 2 -3 3 1 -1 6 -1 -2 4 1 4
3 2 2 -3 3 1 -1 6 -1 -2 4 1 4
3 1 -1 6 -1 -2 4 1 4 -3 0 3 2 2
4 1 4 -3 0 3 2 2 -3 3 1 -1 6
</pre>

<p>
The circular sequence will be generated by the following formula: (<b>a</b>, <b>b</b>, <b>c</b>, <b>d</b> and <b>n</b> are parameters)
</p>

<pre>
	int seed = 0;
	for(int i = 0; i &lt; n; i++)
	{
		seed = (seed * a + b) % 32768;
		int val =(seed * c) / 32768 - d;
		// <i>val</i> is the <i>i</i>'th value in the circular sequence
	}
</pre>

<p>
Create a class CircularSequence containing the method maxSequence which takes ints <b>a</b>, <b>b</b>, <b>c</b>, <b>d</b> and <b>n</b> used as described above, and returns a int[] containing exactly two elements: The first element being the maximum sum, and the second element the number of different sequences yielding this sum (you can assume that this value won't exceed 2,000,000,000). Two sequences are different if they don't contain the same elements from the original sequence.
</p></td></tr><tr><td colspan="2" class="statText">&#160;</td></tr><tr><td colspan="2" class="statText"><h3>Definition</h3></td></tr><tr><td class="statText">&#160;&#160;&#160;&#160;</td><td class="statText"><table><tr><td class="statText">Class:</td><td class="statText">CircularSequence</td></tr><tr><td class="statText">Method:</td><td class="statText">maxSequence</td></tr><tr><td class="statText">Parameters:</td><td class="statText">int, int, int, int, int</td></tr><tr><td class="statText">Returns:</td><td class="statText">int[]</td></tr><tr><td class="statText">Method signature:</td><td class="statText">int[] maxSequence(int a, int b, int c, int d, int n)</td></tr><tr><td colspan="2" class="statText">(be sure your method is public)</td></tr></table></td></tr><tr><td class="statText">&#160;&#160;&#160;&#160;</td></tr><tr><td class="statText"></td></tr><tr><td colspan="2" class="statText">&#160;</td></tr><tr><td colspan="2" class="statText"><h3>Notes</h3></td></tr><tr><td align="center" valign="top" class="statText">-</td><td class="statText">The parameter <b>c</b> determines the span of the integers while <b>d</b> determines the lower bound. The range of the integers will thus be between -<b>d</b> and -<b>d</b>+<b>c</b>-1, inclusive.</td></tr><tr><td colspan="2" class="statText">&#160;</td></tr><tr><td colspan="2" class="statText"><h3>Constraints</h3></td></tr><tr><td align="center" valign="top" class="statText">-</td><td class="statText"><b>a</b> and <b>b</b> will be between 0 and 32767, inclusive.</td></tr><tr><td align="center" valign="top" class="statText">-</td><td class="statText"><b>c</b> will be between 2 and 1000, inclusive.</td></tr><tr><td align="center" valign="top" class="statText">-</td><td class="statText"><b>d</b> will be between 0 and <b>c</b>-2, inclusive.</td></tr><tr><td align="center" valign="top" class="statText">-</td><td class="statText"><b>n</b> will be between 1 and 1,000,000, inclusive.</td></tr><tr><td align="center" valign="top" class="statText">-</td><td class="statText">At least one integer in the circular sequence will be greater than zero.</td></tr><tr><td align="center" valign="top" class="statText">-</td><td class="statText">There will be at most 2,000,000,000 different contiguous sequences yielding the maximum sum.</td></tr><tr><td colspan="2" class="statText">&#160;</td></tr><tr><td colspan="2" class="statText"><h3>Examples</h3></td></tr><tr><td align="center" nowrap="true" class="statText">0)</td><td class="statText"></td></tr><tr><td class="statText">&#160;&#160;&#160;&#160;</td><td class="statText"><table><tr><td class="statText"><table><tr><td class="statText"><pre>8087</pre></td></tr><tr><td class="statText"><pre>1869</pre></td></tr><tr><td class="statText"><pre>10</pre></td></tr><tr><td class="statText"><pre>3</pre></td></tr><tr><td class="statText"><pre>15</pre></td></tr></table></td></tr><tr><td class="statText"><pre>Returns: { 19,  4 }</pre></td></tr><tr><td class="statText"><table><tr><td colspan="2" class="statText">This is the example above.
</td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true" class="statText">1)</td><td class="statText"></td></tr><tr><td class="statText">&#160;&#160;&#160;&#160;</td><td class="statText"><table><tr><td class="statText"><table><tr><td class="statText"><pre>1234</pre></td></tr><tr><td class="statText"><pre>46</pre></td></tr><tr><td class="statText"><pre>2</pre></td></tr><tr><td class="statText"><pre>0</pre></td></tr><tr><td class="statText"><pre>5</pre></td></tr></table></td></tr><tr><td class="statText"><pre>Returns: { 1,  11 }</pre></td></tr><tr><td class="statText"><table><tr><td colspan="2" class="statText"><p>
The generated sequence is {0, 1, 0, 0, 0}. The maximum sum is obviously 1.
</p>

<p>
There are 11 ways to get this sum:
<ul>
<li>1 way to select a single element: {1}</li>
<li>2 ways to select two elements: {0, 1} and {1, 0}</li>
<li>3 ways to select three elements: {0, 0, 1}, {0, 1, 0} and {1, 0, 0}</li>
<li>4 ways to select four elements: {0, 0, 0, 1}, {0, 0, 1, 0}, {0, 1, 0, 0} and {1, 0, 0, 0}</li>
<li>1 way to select all five elements: {0, 0, 0, 0, 1} (or any rotation of this)</li>
</ul>
</p>
</td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true" class="statText">2)</td><td class="statText"></td></tr><tr><td class="statText">&#160;&#160;&#160;&#160;</td><td class="statText"><table><tr><td class="statText"><table><tr><td class="statText"><pre>4810</pre></td></tr><tr><td class="statText"><pre>8393</pre></td></tr><tr><td class="statText"><pre>20</pre></td></tr><tr><td class="statText"><pre>10</pre></td></tr><tr><td class="statText"><pre>18</pre></td></tr></table></td></tr><tr><td class="statText"><pre>Returns: { 45,  1 }</pre></td></tr><tr><td class="statText"><table><tr><td colspan="2" class="statText">These parameters yield the circular sequence {-5, -5, 7, 5, 0, 8, 1, 0, 6, 0, 1, 7, -10, -5, 5, 5, 5, 5}. The maximum value is achieved by taking all elements except -10 and -5 at the near end.
</td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true" class="statText">3)</td><td class="statText"></td></tr><tr><td class="statText">&#160;&#160;&#160;&#160;</td><td class="statText"><table><tr><td class="statText"><table><tr><td class="statText"><pre>1943</pre></td></tr><tr><td class="statText"><pre>3184</pre></td></tr><tr><td class="statText"><pre>9</pre></td></tr><tr><td class="statText"><pre>5</pre></td></tr><tr><td class="statText"><pre>100000</pre></td></tr></table></td></tr><tr><td class="statText"><pre>Returns: { 14,  195 }</pre></td></tr><tr><td class="statText"></td></tr></table></td></tr><tr><td align="center" nowrap="true" class="statText">4)</td><td class="statText"></td></tr><tr><td class="statText">&#160;&#160;&#160;&#160;</td><td class="statText"><table><tr><td class="statText"><table><tr><td class="statText"><pre>1</pre></td></tr><tr><td class="statText"><pre>10922</pre></td></tr><tr><td class="statText"><pre>3</pre></td></tr><tr><td class="statText"><pre>1</pre></td></tr><tr><td class="statText"><pre>16383</pre></td></tr></table></td></tr><tr><td class="statText"><pre>Returns: { 1,  59645042 }</pre></td></tr><tr><td class="statText"><table><tr><td colspan="2" class="statText"><p>
The generated sequence looks like this: {-1, 0, 1, -1, 0, 1, -1, 0, 1, ... }, i.e. the sequence
{-1, 0, 1} is repeated 5461 times. The maximum sum is obviously 1.
</p>

<p>
There are 2 essentially different ways to get this sum:
<ul>
<li>Start at a 0, end at a 1. There are 5461 0's to start at, and 5461 1's to end at, i.e. 5461<sup>2</sup> ways.</li>
<li>Start at a 1, end at a 1. Again there are 5461<sup>2</sup> such ways.</li>
</ul>
There are thus  2 * 5461<sup>2</sup> = 59645042 ways to get the sum 1.
</p>
</td></tr></table></td></tr></table></td></tr></table><hr><p>This problem statement is the exclusive and proprietary property of TopCoder, Inc.  Any unauthorized use or reproduction of this information without the prior written consent of TopCoder, Inc. is strictly prohibited.  (c)2010, TopCoder, Inc.  All rights reserved.  </p>
                      
                   </td>
                 </tr>
                 <tr>
                   <td colspan="7"><img src="/i/clear.gif" alt="" width="1" height="3" border="0"></td>
                 </tr>
                 <tr>
                   <td background="/i/steel_blue_bg.gif" class="statText" colspan="7"><img src="/i/clear.gif" alt="" width="1" height="5" border="0"></td>
                 </tr>
                 <tr>
                   <td class="statText" colspan="7"><img src="/i/clear.gif" alt="" width="1" height="16" border="0"></td>
                 </tr>
                 <tr>
                   <td class="statText" colspan="7">
                      This problem was used for:
   
   	<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="/tc?module=ProblemDetail&rd=5883&pm=2412">2004 TCO Semifinal Room 2 - Division I, Level Three</a>
   
                   
                   </td>
                 </tr>


               </table>
             </td>
           </tr>
           <tr>
             <td width="100%"><img src="/i/clear.gif" alt="" width="1" height="10" border="0"></td>
           </tr>
         </table>
</body>
</html>
