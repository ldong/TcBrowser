<html>
<head>
<title>Â Problem Statement for PhoneSearch</title>
</head>
<body>
<table border="0" cellspacing="0" cellpadding="10" width="100%">
           <tr>
             <td valign="top" width="100%"><img src="/i/clear.gif" alt="" width="240" height="1" border="0"><br>
               <table border="0" cellspacing="0" cellpadding="0" width="100%">
                 <tr>
                   <td colspan="7"><img src="/i/clear.gif" alt="" width="1" height="1" border="0"></td>
                 </tr>
                 <tr>
                   <td colspan="7"><img src="/i/clear.gif" alt="" width="1" height="5" border="0"></td>
                 </tr>
                 <tr>
                   
                     <td background="/i/steel_gray_bg.gif" class="statTextBig" colspan="7" height="18">&#160;Problem Statement for PhoneSearch</td>
                   
                 </tr>
                 <tr>
                   <td colspan="7"><img src="/i/clear.gif" alt="" width="1" height="1" border="0"></td>
                 </tr>
                 <tr>
                   <td colspan="7"><img src="/i/clear.gif" alt="" width="1" height="1" border="0"></td>
                 </tr>
                 <tr>
                   <td class="problemText" valign="middle" align="left">
                      
              		<table><tr><td colspan="2" class="statText"><h3>Problem Statement</h3></td></tr><tr><td class="statText">&#160;&#160;&#160;&#160;</td><td class="statText"><p>
When you were young and naive, you used to look up phone numbers by starting at the beginning
of the phone book and flipping through the pages one at a time.  By the time you found a phone
number, you had usually forgotten why you wanted to call!  Then you learned about binary search,
and life was good.  But now it has occurred to you that you might be able to do even better.
You've realized that it is silly to look up a name like Wachowski by starting in the middle of
the phone book.  Instead, you should begin by opening the book to a page near the end.
</p>

<p>
Based on a study of the ethnicities present in your home town, you have compiled a int[]
<b>freqs</b> of the expected relative frequencies of each letter, 'A' through 'Z'.  For example,
if <b>freqs</b>[0] is 7 and <b>freqs</b>[25] is 1, then you expect 7 times as many names to start with
'A' as start with 'Z'.  Although it is unrealistic, you have decided to make the simplifying assumption
that the same frequencies apply to the second and third letters, regardless of the values of the preceding
letters.  For example, among the names that start with 'F', you assume that 
7 times as many have 'A' as the second letter as have 'Z' as the second letter (using the above
frequencies), and among names that start with &quot;GR&quot;, you assume that 7 times as many have 'A' as the
third letter as have 'Z' as the third letter.
</p>

<p>
Each page in your phone book is labeled at the top with the three-letter prefix of the first name on that page
and the three-letter prefix of the last name on that page, in the form &quot;XXX-YYY&quot; (nobody in your home town has a
name shorter than three letters).  The prefixes are always written in uppercase letters, and the pages are arranged in 
alphabetical order.  Every page contains the same number of names, and page breaks never fall between two names that have the same three-letter prefix.
You will be given information on the pages of your phone book as a String[] <b>pages</b>, containing the labels
of all the pages in the phone book, in order.
</p>

<p>
You will be given the three-letter <b>prefix</b> of a name you want to look up.
You intend to use the following strategy for searching the phone book.
Based on your knowledge of the expected frequencies and the number of pages in the phone book, you will calculate the page where
you expect the prefix to appear, and flip to that page.  If it is the correct page for that prefix, you are done.  Otherwise,
you have narrowed down the pages on which it might appear, so you will recalculate and repeat.  Eventually, you will either find
the right page or discover that the prefix cannot possibly appear in the phone book (because it falls between the last name on one page
and the first name on the next page, for example).
</p>

<p>
When recalculating the page where you expect the prefix to appear, you must take into account the prefixes on the pages you have seen.
For example, if you have seen &quot;HAR-JOH&quot; on page 7 and &quot;MCD-NAS&quot; on page 11, and you are looking for &quot;LOA&quot;, then you know it must
appear between pages 7 and 11 (exclusive).  You assume that the names on those pages, which fall between &quot;JOH&quot; and &quot;MCD&quot; (exclusive),
are distributed according to the expected frequencies and calculate your next page flip accordingly.
</p>

<p>
Notice that the expected frequencies might <i>predict</i> that a certain prefix appears on several adjacent pages, even though we know
that each prefix appears on at most a single page in the actual book.  When this occurs, you will flip to the middle of those adjacent
pages, rounding down if necessary.  For example, if the frequencies predict that a given prefix appears on pages 22-25, you would
flip to page 23.
</p>

<p>
Given <b>freqs</b>, <b>pages</b>, and the three-letter <b>prefix</b> of the name you are searching for, calculate 
the number of page flips it takes to either find the right page
or discover that the <b>prefix</b> cannot possibly appear in the phone book. 
If you find the right page, return the number of page flips. If you discover that the <b>prefix</b> 
cannot appear in the phone book, return the negative of the number of page flips.
</p>

</td></tr><tr><td colspan="2" class="statText">&#160;</td></tr><tr><td colspan="2" class="statText"><h3>Definition</h3></td></tr><tr><td class="statText">&#160;&#160;&#160;&#160;</td><td class="statText"><table><tr><td class="statText">Class:</td><td class="statText">PhoneSearch</td></tr><tr><td class="statText">Method:</td><td class="statText">pageFlips</td></tr><tr><td class="statText">Parameters:</td><td class="statText">int[], String[], String</td></tr><tr><td class="statText">Returns:</td><td class="statText">int</td></tr><tr><td class="statText">Method signature:</td><td class="statText">int pageFlips(int[] freqs, String[] pages, String prefix)</td></tr><tr><td colspan="2" class="statText">(be sure your method is public)</td></tr></table></td></tr><tr><td class="statText">&#160;&#160;&#160;&#160;</td></tr><tr><td class="statText"></td></tr><tr><td colspan="2" class="statText">&#160;</td></tr><tr><td colspan="2" class="statText"><h3>Constraints</h3></td></tr><tr><td align="center" valign="top" class="statText">-</td><td class="statText"><b>freqs</b> contains exactly 26 elements.</td></tr><tr><td align="center" valign="top" class="statText">-</td><td class="statText">Each element of <b>freqs</b> is between 1 and 999, inclusive.</td></tr><tr><td align="center" valign="top" class="statText">-</td><td class="statText"><b>pages</b> contains between 1 and 50 elements.</td></tr><tr><td align="center" valign="top" class="statText">-</td><td class="statText">Each element of <b>pages</b> is formatted as &quot;UUU-UUU&quot;, where each 'U' is an uppercase letter ('A'-'Z').</td></tr><tr><td align="center" valign="top" class="statText">-</td><td class="statText">The first prefix on each page is equal to or earlier alphabetically than the last prefix on the same page.</td></tr><tr><td align="center" valign="top" class="statText">-</td><td class="statText">The last prefix on each page is strictly earlier alphabetically than the first prefix on the next page.</td></tr><tr><td align="center" valign="top" class="statText">-</td><td class="statText"><b>prefix</b> contains exactly three characters.</td></tr><tr><td align="center" valign="top" class="statText">-</td><td class="statText">Each character in <b>prefix</b> is an uppercase letter ('A'-'Z').</td></tr><tr><td colspan="2" class="statText">&#160;</td></tr><tr><td colspan="2" class="statText"><h3>Examples</h3></td></tr><tr><td align="center" nowrap="true" class="statText">0)</td><td class="statText"></td></tr><tr><td class="statText">&#160;&#160;&#160;&#160;</td><td class="statText"><table><tr><td class="statText"><table><tr><td class="statText"><pre>{ 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1 }</pre></td></tr><tr><td class="statText"><pre>{ &quot;AAA-EZZ&quot;, &quot;FAA-JZZ&quot;, &quot;KAA-OZZ&quot;, &quot;PAA-TZZ&quot;, &quot;UAA-ZZZ&quot; }</pre></td></tr><tr><td class="statText"><pre>&quot;WAC&quot;</pre></td></tr></table></td></tr><tr><td class="statText"><pre>Returns: 1</pre></td></tr><tr><td class="statText"><table><tr><td colspan="2" class="statText">All prefixes are equally likely.  &quot;WAC&quot; is the 14875th prefix in alphabetical
order, out of 17576 total possible prefixes.  This puts it in the 84th percentile, so clearly you should flip to page 5 first, which turns out to be the right page.</td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true" class="statText">1)</td><td class="statText"></td></tr><tr><td class="statText">&#160;&#160;&#160;&#160;</td><td class="statText"><table><tr><td class="statText"><table><tr><td class="statText"><pre>{ 1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1 }</pre></td></tr><tr><td class="statText"><pre>{ &quot;AAA-EZZ&quot;, &quot;FAA-JZZ&quot;, &quot;KAA-OZZ&quot;, &quot;PAA-TOO&quot;, &quot;TOQ-ZZZ&quot; }</pre></td></tr><tr><td class="statText"><pre>&quot;TOP&quot;</pre></td></tr></table></td></tr><tr><td class="statText"><pre>Returns: -2</pre></td></tr><tr><td class="statText"><table><tr><td colspan="2" class="statText">You first flip to page 4 and see that it is not the right page.
&quot;TOP&quot; comes after &quot;TOO&quot;, so you next turn to page 5.  However, &quot;TOP&quot;
comes before &quot;TOQ&quot;, so you know that &quot;TOP&quot; doesn't appear in the phone book.</td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true" class="statText">2)</td><td class="statText"></td></tr><tr><td class="statText">&#160;&#160;&#160;&#160;</td><td class="statText"><table><tr><td class="statText"><table><tr><td class="statText"><pre>{ 51,50,50,50,50,50,50,50,50,50,50,50,50,
  50,50,50,50,50,50,50,50,50,50,50,50,50 }</pre></td></tr><tr><td class="statText"><pre>{ &quot;ZAA-ZBZ&quot;, &quot;ZCA-ZDZ&quot;, &quot;ZEA-ZFZ&quot;, &quot;ZGA-ZHZ&quot;, &quot;ZIA-ZJZ&quot;,
  &quot;ZKA-ZLZ&quot;, &quot;ZMA-ZNZ&quot;, &quot;ZOA-ZPZ&quot;, &quot;ZQA-ZRZ&quot;, &quot;ZSA-ZTZ&quot;,
  &quot;ZUA-ZVZ&quot;, &quot;ZWA-ZXZ&quot;, &quot;ZYA-ZZZ&quot; }</pre></td></tr><tr><td class="statText"><pre>&quot;YYY&quot;</pre></td></tr></table></td></tr><tr><td class="statText"><pre>Returns: -13</pre></td></tr><tr><td class="statText"><table><tr><td colspan="2" class="statText">This is a strange town in which everybody's name starts with 'Z'.
Based on the expected frequencies, you always expect &quot;YYY&quot; to appear
on the last available page, so you flip backward through the pages
one by one.  (You begin to think that maybe binary search wasn't so bad
after all...)

<p>
Also, beware of overflow.
</p></td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true" class="statText">3)</td><td class="statText"></td></tr><tr><td class="statText">&#160;&#160;&#160;&#160;</td><td class="statText"><table><tr><td class="statText"><table><tr><td class="statText"><pre>{ 1,999,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1 }</pre></td></tr><tr><td class="statText"><pre>{ &quot;AAA-CZZ&quot;, &quot;DAA-FZZ&quot;, &quot;GAA-IZZ&quot;, &quot;JAA-LZZ&quot;,
  &quot;MAA-OZZ&quot;, &quot;PAA-RZZ&quot;, &quot;SAA-UZZ&quot;, &quot;VAA-ZZZ&quot; }</pre></td></tr><tr><td class="statText"><pre>&quot;BBB&quot;</pre></td></tr></table></td></tr><tr><td class="statText"><pre>Returns: 3</pre></td></tr><tr><td class="statText"><table><tr><td colspan="2" class="statText">Based on the expected frequencies, you expect the names beginning with &quot;BBB&quot; to start
partway down page 1 and end partway down page 8, so you first flip to page 4, which is too high.  Next, you expect the names beginning with &quot;BBB&quot; to start partway down page 1 and end partway down page 3, so you flip to page 2, which is again too high.  Finally, you flip to page 1.</td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true" class="statText">4)</td><td class="statText"></td></tr><tr><td class="statText">&#160;&#160;&#160;&#160;</td><td class="statText"><table><tr><td class="statText"><table><tr><td class="statText"><pre>{ 24,1,32,1,1,1,1,4,1,1,1,1,4,1,1,1,1,1,1,4,1,1,1,1,1,1 }</pre></td></tr><tr><td class="statText"><pre>{ &quot;HAT-HAT&quot;, &quot;MCC-MCC&quot; }</pre></td></tr><tr><td class="statText"><pre>&quot;HAT&quot;</pre></td></tr></table></td></tr><tr><td class="statText"><pre>Returns: 2</pre></td></tr><tr><td class="statText"><table><tr><td colspan="2" class="statText">A two-family town in which everybody is named either Hatfield or McCoy.  Notice that a page can be entirely filled with a single prefix.</td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true" class="statText">5)</td><td class="statText"></td></tr><tr><td class="statText">&#160;&#160;&#160;&#160;</td><td class="statText"><table><tr><td class="statText"><table><tr><td class="statText"><pre>{ 4,4,5,4,4,4,4,4,4,4,4,4,4,4,4,5,4,5,6,4,4,3,1,3,2,2 }</pre></td></tr><tr><td class="statText"><pre>{ &quot;AAA-CJS&quot;, &quot;CKN-DEF&quot;, &quot;EFD-FFT&quot;, &quot;GAB-HUD&quot;, &quot;ICH-KAL&quot;,
  &quot;LIM-MON&quot;, &quot;NOP-PQR&quot;, &quot;STU-STY&quot;, &quot;TAL-WAC&quot;, &quot;WAD-ZUC&quot; }</pre></td></tr><tr><td class="statText"><pre>&quot;CJS&quot;</pre></td></tr></table></td></tr><tr><td class="statText"><pre>Returns: 2</pre></td></tr><tr><td class="statText"></td></tr></table></td></tr><tr><td align="center" nowrap="true" class="statText">6)</td><td class="statText"></td></tr><tr><td class="statText">&#160;&#160;&#160;&#160;</td><td class="statText"><table><tr><td class="statText"><table><tr><td class="statText"><pre>{ 15,10,17,7,5,3,10,19,13,156,3,8,7,1,3,9,21,22,15,12,10,5,5,6,7,1 }</pre></td></tr><tr><td class="statText"><pre>{ &quot;AAA-AAA&quot;,&quot;AAB-AZZ&quot;,&quot;BAA-BAA&quot;,&quot;BAB-BZZ&quot;,&quot;CAA-CAA&quot;,
  &quot;CAB-CZZ&quot;,&quot;DAA-DAA&quot;,&quot;DAB-DZZ&quot;,&quot;EAA-EAA&quot;,&quot;EAB-EZZ&quot;,
  &quot;FAA-FAA&quot;,&quot;FAB-FZZ&quot;,&quot;GAA-GAA&quot;,&quot;GAB-GZZ&quot;,&quot;HAA-HAA&quot;,
  &quot;HAB-HZZ&quot;,&quot;IAA-IAA&quot;,&quot;IAB-IZZ&quot;,&quot;JAA-JAA&quot;,&quot;JAB-JAB&quot;,
  &quot;JAC-JAC&quot;,&quot;JAD-JZZ&quot;,&quot;LAA-LAA&quot;,&quot;LAB-LZZ&quot;,&quot;MAA-MAA&quot;,
  &quot;MAB-MZZ&quot;,&quot;NAA-NAA&quot;,&quot;NAB-NZZ&quot;,&quot;OAA-OAA&quot;,&quot;OAB-OZZ&quot;,
  &quot;PAA-PAA&quot;,&quot;PAB-PZZ&quot;,&quot;QAA-QAA&quot;,&quot;QAB-QZZ&quot;,&quot;RAA-RAA&quot;,
  &quot;RAB-RZZ&quot;,&quot;SAA-SAA&quot;,&quot;SAB-SZZ&quot;,&quot;TAA-TAA&quot;,&quot;TAB-TZZ&quot;,
  &quot;UAA-UAA&quot;,&quot;UAB-UZZ&quot;,&quot;VAA-VAA&quot;,&quot;VAB-VZZ&quot;,&quot;WAA-WAA&quot;,
  &quot;WAB-WZZ&quot;,&quot;XAA-XAA&quot;,&quot;XAB-XZZ&quot;,&quot;YAA-YAA&quot;,&quot;YAB-YZZ&quot; }</pre></td></tr><tr><td class="statText"><pre>&quot;JJJ&quot;</pre></td></tr></table></td></tr><tr><td class="statText"><pre>Returns: 4</pre></td></tr><tr><td class="statText"></td></tr></table></td></tr></table><hr><p>This problem statement is the exclusive and proprietary property of TopCoder, Inc.  Any unauthorized use or reproduction of this information without the prior written consent of TopCoder, Inc. is strictly prohibited.  (c)2010, TopCoder, Inc.  All rights reserved.  </p>
                      
                   </td>
                 </tr>
                 <tr>
                   <td colspan="7"><img src="/i/clear.gif" alt="" width="1" height="3" border="0"></td>
                 </tr>
                 <tr>
                   <td background="/i/steel_blue_bg.gif" class="statText" colspan="7"><img src="/i/clear.gif" alt="" width="1" height="5" border="0"></td>
                 </tr>
                 <tr>
                   <td class="statText" colspan="7"><img src="/i/clear.gif" alt="" width="1" height="16" border="0"></td>
                 </tr>
                 <tr>
                   <td class="statText" colspan="7">
                      This problem was used for:
   
   	<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="/tc?module=ProblemDetail&rd=5876&pm=2994">2004 TCO Qualification Round Set 4 - Division I, Level Three</a>
   
                   
                   </td>
                 </tr>


               </table>
             </td>
           </tr>
           <tr>
             <td width="100%"><img src="/i/clear.gif" alt="" width="1" height="10" border="0"></td>
           </tr>
         </table>
</body>
</html>
