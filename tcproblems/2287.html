<html>
<head>
<title>Â Problem Statement for RandomFA</title>
</head>
<body>
<table border="0" cellspacing="0" cellpadding="10" width="100%">
           <tr>
             <td valign="top" width="100%"><img src="/i/clear.gif" alt="" width="240" height="1" border="0"><br>
               <table border="0" cellspacing="0" cellpadding="0" width="100%">
                 <tr>
                   <td colspan="7"><img src="/i/clear.gif" alt="" width="1" height="1" border="0"></td>
                 </tr>
                 <tr>
                   <td colspan="7"><img src="/i/clear.gif" alt="" width="1" height="5" border="0"></td>
                 </tr>
                 <tr>
                   
                     <td background="/i/steel_gray_bg.gif" class="statTextBig" colspan="7" height="18">&#160;Problem Statement for RandomFA</td>
                   
                 </tr>
                 <tr>
                   <td colspan="7"><img src="/i/clear.gif" alt="" width="1" height="1" border="0"></td>
                 </tr>
                 <tr>
                   <td colspan="7"><img src="/i/clear.gif" alt="" width="1" height="1" border="0"></td>
                 </tr>
                 <tr>
                   <td class="problemText" valign="middle" align="left">
                      
              		<table><tr><td colspan="2" class="statText"><h3>Problem Statement</h3></td></tr><tr><td class="statText">&#160;&#160;&#160;&#160;</td><td class="statText">A Randomized Finite Automaton (RFA) works as follows.  The RFA maintains a variable, called its <i>state</i>, which is initially set to 0.  When an input character ('a', 'b', or 'c') is fed into the RFA, it must determine which new value is to be assigned to its state.  This determining process is governed by a list of rules stored in the RFA.  For example, if the RFA is in state 2 and has received an 'a' as input, the RFA would consult element 2 of <b>rulesa</b>.  Each element of <b>rulesa</b> is of the form &quot;st:prob st:prob ...&quot;, where st denotes a value to be assigned to the state variable, and prob denotes the percentage (out of 100) of such an assignment occurring.  If the given probabilities do not add up to 100, the remaining probability is the chance of changing state to 999.  If a state (not 999) is missing from a rule, then its prob is assumed to be 0.  Once state is 999, regardless of future input, it remains on 999.  The machine has analogously defined <b>rulesb</b>, and <b>rulesc</b> defining what to do on 'b' or 'c' accordingly.<br>
<br>
When processing an input string, each character is processed in order, left to right, one at a time.  Assuming all input strings of length <b>maxLength</b> or fewer (including the string of length 0) are equally likely, return the probability the RFA will be on state <b>finalState</b> once the string is completely processed.  The probability returned will be a double, between 0 and 1 inclusive.  Results must be accurate to 1e-9.</td></tr><tr><td colspan="2" class="statText">&#160;</td></tr><tr><td colspan="2" class="statText"><h3>Definition</h3></td></tr><tr><td class="statText">&#160;&#160;&#160;&#160;</td><td class="statText"><table><tr><td class="statText">Class:</td><td class="statText">RandomFA</td></tr><tr><td class="statText">Method:</td><td class="statText">getProbability</td></tr><tr><td class="statText">Parameters:</td><td class="statText">String[], String[], String[], int, int</td></tr><tr><td class="statText">Returns:</td><td class="statText">double</td></tr><tr><td class="statText">Method signature:</td><td class="statText">double getProbability(String[] rulesa, String[] rulesb, String[] rulesc, int finalState, int maxLength)</td></tr><tr><td colspan="2" class="statText">(be sure your method is public)</td></tr></table></td></tr><tr><td class="statText">&#160;&#160;&#160;&#160;</td></tr><tr><td class="statText"></td></tr><tr><td colspan="2" class="statText">&#160;</td></tr><tr><td colspan="2" class="statText"><h3>Constraints</h3></td></tr><tr><td align="center" valign="top" class="statText">-</td><td class="statText"><b>rulesa</b> will contain between 1 and 50 elements inclusive.</td></tr><tr><td align="center" valign="top" class="statText">-</td><td class="statText"><b>rulesa</b>, <b>rulesb</b>, and <b>rulesc</b> all contain the same number of elements.</td></tr><tr><td align="center" valign="top" class="statText">-</td><td class="statText">Each element of <b>rulesa</b>, <b>rulesb</b>, and <b>rulesc</b> contain between 0 and 50 characters inclusive.</td></tr><tr><td align="center" valign="top" class="statText">-</td><td class="statText">Each element of <b>rulesa</b>, <b>rulesb</b>, and <b>rulesc</b> is a single space delimited list of <i>pairs</i>.  Each pair is of the form (quotes for clarity) &quot;st:prob&quot; where,<br>st is an integer, with no extra leading zeros, between 0 and (size of <b>rulesa</b>-1) inclusive, and<br>prob is a positive integer, with no leading zeros.</td></tr><tr><td align="center" valign="top" class="statText">-</td><td class="statText">The prob values in a single element of <b>rulesa</b>, <b>rulesb</b>, or <b>rulesc</b> will sum up to a value between 0 and 100 inclusive.</td></tr><tr><td align="center" valign="top" class="statText">-</td><td class="statText">No 2 pairs in a single element of <b>rulesa</b>, <b>rulesb</b>, or <b>rulesc</b> will have the same st value.</td></tr><tr><td align="center" valign="top" class="statText">-</td><td class="statText"><b>finalState</b> will be between 0 and (size of <b>rulesa</b>-1) inclusive, or 999.</td></tr><tr><td align="center" valign="top" class="statText">-</td><td class="statText"><b>maxLength</b> will be between 0 and 10 inclusive.</td></tr><tr><td colspan="2" class="statText">&#160;</td></tr><tr><td colspan="2" class="statText"><h3>Examples</h3></td></tr><tr><td align="center" nowrap="true" class="statText">0)</td><td class="statText"></td></tr><tr><td class="statText">&#160;&#160;&#160;&#160;</td><td class="statText"><table><tr><td class="statText"><table><tr><td class="statText"><pre>{&quot;0:100&quot;}</pre></td></tr><tr><td class="statText"><pre>{&quot;&quot;}</pre></td></tr><tr><td class="statText"><pre>{&quot;&quot;}</pre></td></tr><tr><td class="statText"><pre>999</pre></td></tr><tr><td class="statText"><pre>1</pre></td></tr></table></td></tr><tr><td class="statText"><pre>Returns: 0.5</pre></td></tr><tr><td class="statText"><table><tr><td colspan="2" class="statText">The 4 strings that need to be considered are (quotes for clarity) &quot;&quot;, &quot;a&quot;, &quot;b&quot;, and &quot;c&quot;.  Of those 4, the first 2 will end up on state 0, while the latter 2 will end up on state 999.  2 out of 4 produces a probability of .5 .</td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true" class="statText">1)</td><td class="statText"></td></tr><tr><td class="statText">&#160;&#160;&#160;&#160;</td><td class="statText"><table><tr><td class="statText"><table><tr><td class="statText"><pre>{&quot;1:100&quot;,&quot;0:100&quot;}</pre></td></tr><tr><td class="statText"><pre>{&quot;1:100&quot;,&quot;0:100&quot;}</pre></td></tr><tr><td class="statText"><pre>{&quot;1:100&quot;,&quot;0:100&quot;}</pre></td></tr><tr><td class="statText"><pre>1</pre></td></tr><tr><td class="statText"><pre>3</pre></td></tr></table></td></tr><tr><td class="statText"><pre>Returns: 0.75</pre></td></tr><tr><td class="statText"><table><tr><td colspan="2" class="statText">Here all even length strings will result in state 0, and odd length strings will result in state 1.  Of the 40 strings considered, 1 has length 0, 3 have length 1, 9 have length 2, and 27 have length 3.  Thus 30/40=.75 of them have odd length.</td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true" class="statText">2)</td><td class="statText"></td></tr><tr><td class="statText">&#160;&#160;&#160;&#160;</td><td class="statText"><table><tr><td class="statText"><table><tr><td class="statText"><pre>{&quot;1:25 2:25 3:25 4:25&quot;,&quot;0:100&quot;,&quot;0:100&quot;,&quot;0:100&quot;,&quot;0:100&quot;}</pre></td></tr><tr><td class="statText"><pre>{&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;}</pre></td></tr><tr><td class="statText"><pre>{&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;}</pre></td></tr><tr><td class="statText"><pre>3</pre></td></tr><tr><td class="statText"><pre>5</pre></td></tr></table></td></tr><tr><td class="statText"><pre>Returns: 0.0020604395604395605</pre></td></tr><tr><td class="statText"><table><tr><td colspan="2" class="statText">All strings that contain a 'b', or 'c' are sent to 999.  The strings containing only 'a's begin on state 0, and are evenly distributed between states 1,2,3 and 4 after the first 'a'.  After the second 'a' they are all returned to state 0.  Examining this pattern, we see that strings that end on state 3 must contain only 'a's and have odd length.  Of those, only a quarter of them actually make it to state 3.  There are 3 strings consisting of only 'a's that have odd lengths less than or equal 5.  This makes 3 out of the total 364 strings.  The returned probability is thus 3/364*.25 = .0021 approx.</td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true" class="statText">3)</td><td class="statText"></td></tr><tr><td class="statText">&#160;&#160;&#160;&#160;</td><td class="statText"><table><tr><td class="statText"><table><tr><td class="statText"><pre>{&quot;1:25 2:25 3:25 4:25&quot;,&quot;0:100&quot;,&quot;0:100&quot;,&quot;0:100&quot;,&quot;0:100&quot;}</pre></td></tr><tr><td class="statText"><pre>{&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;}</pre></td></tr><tr><td class="statText"><pre>{&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;}</pre></td></tr><tr><td class="statText"><pre>999</pre></td></tr><tr><td class="statText"><pre>5</pre></td></tr></table></td></tr><tr><td class="statText"><pre>Returns: 0.9835164835164837</pre></td></tr><tr><td class="statText"><table><tr><td colspan="2" class="statText">The same problem as before, but now we want the strings that will end on 999.  This will be any string of positive length that has a 'b' or 'c'.  There are 358 of these, resulting in a probability of 358/364 = .984 approx. </td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true" class="statText">4)</td><td class="statText"></td></tr><tr><td class="statText">&#160;&#160;&#160;&#160;</td><td class="statText"><table><tr><td class="statText"><table><tr><td class="statText"><pre>{&quot;2:9 0:7 3:4 1:2 5:35&quot;,&quot;2:9 0:7 3:4 1:2 5:35&quot;,
 &quot;2:9 0:7 3:4 1:2 5:35&quot;,&quot;2:9 0:7 3:4 1:2 5:35&quot;,
 &quot;2:9 0:7 3:4 1:2 5:35&quot;,&quot;2:9 0:7 3:4 1:2 5:35&quot;}</pre></td></tr><tr><td class="statText"><pre>{&quot;0:10 4:7 5:1&quot;,&quot;0:10 4:7 5:1&quot;,&quot;0:10 4:7 5:1&quot;,
 &quot;0:10 4:7 5:1&quot;,&quot;0:10 4:7 5:1&quot;,&quot;3:79 2:10&quot;}</pre></td></tr><tr><td class="statText"><pre>{&quot;1:100&quot;,&quot;2:100&quot;,&quot;3:100&quot;,&quot;4:100&quot;,&quot;5:100&quot;,&quot;0:100&quot;}</pre></td></tr><tr><td class="statText"><pre>3</pre></td></tr><tr><td class="statText"><pre>10</pre></td></tr></table></td></tr><tr><td class="statText"><pre>Returns: 0.002676338903044717</pre></td></tr><tr><td class="statText"><table><tr><td colspan="2" class="statText">A more complex example.</td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true" class="statText">5)</td><td class="statText"></td></tr><tr><td class="statText">&#160;&#160;&#160;&#160;</td><td class="statText"><table><tr><td class="statText"><table><tr><td class="statText"><pre>{&quot;2:9 0:7 3:4 1:2 5:35&quot;,&quot;2:9 0:7 3:4 1:2 5:35&quot;,
 &quot;2:9 0:7 3:4 1:2 5:35&quot;,&quot;2:9 0:7 3:4 1:2 5:35&quot;,
 &quot;2:9 0:7 3:4 1:2 5:35&quot;,&quot;2:9 0:7 3:4 1:2 5:35&quot;}</pre></td></tr><tr><td class="statText"><pre>{&quot;0:10 4:7 5:1&quot;,&quot;0:10 4:7 5:1&quot;,&quot;0:10 4:7 5:1&quot;,
 &quot;0:10 4:7 5:1&quot;,&quot;0:10 4:7 5:1&quot;,&quot;3:79 2:10&quot;}</pre></td></tr><tr><td class="statText"><pre>{&quot;1:100&quot;,&quot;2:100&quot;,&quot;3:100&quot;,&quot;4:100&quot;,&quot;5:100&quot;,&quot;0:100&quot;}</pre></td></tr><tr><td class="statText"><pre>3</pre></td></tr><tr><td class="statText"><pre>0</pre></td></tr></table></td></tr><tr><td class="statText"><pre>Returns: 0.0</pre></td></tr><tr><td class="statText"><table><tr><td colspan="2" class="statText">Same as before, but only the empty string is considered.</td></tr></table></td></tr></table></td></tr></table><hr><p>This problem statement is the exclusive and proprietary property of TopCoder, Inc.  Any unauthorized use or reproduction of this information without the prior written consent of TopCoder, Inc. is strictly prohibited.  (c)2010, TopCoder, Inc.  All rights reserved.  </p>
                      
                   </td>
                 </tr>
                 <tr>
                   <td colspan="7"><img src="/i/clear.gif" alt="" width="1" height="3" border="0"></td>
                 </tr>
                 <tr>
                   <td background="/i/steel_blue_bg.gif" class="statText" colspan="7"><img src="/i/clear.gif" alt="" width="1" height="5" border="0"></td>
                 </tr>
                 <tr>
                   <td class="statText" colspan="7"><img src="/i/clear.gif" alt="" width="1" height="16" border="0"></td>
                 </tr>
                 <tr>
                   <td class="statText" colspan="7">
                      This problem was used for:
   
   	<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="/tc?module=ProblemDetail&rd=4710&pm=2287">Single Round Match 178 Round 1 - Division I, Level Two</a>
   
                   
                   </td>
                 </tr>


               </table>
             </td>
           </tr>
           <tr>
             <td width="100%"><img src="/i/clear.gif" alt="" width="1" height="10" border="0"></td>
           </tr>
         </table>
</body>
</html>
