<html>
<head>
<title>Â Problem Statement for RandomFights</title>
</head>
<body>
<table border="0" cellspacing="0" cellpadding="10" width="100%">
           <tr>
             <td valign="top" width="100%"><img src="/i/clear.gif" alt="" width="240" height="1" border="0"><br>
               <table border="0" cellspacing="0" cellpadding="0" width="100%">
                 <tr>
                   <td colspan="7"><img src="/i/clear.gif" alt="" width="1" height="1" border="0"></td>
                 </tr>
                 <tr>
                   <td colspan="7"><img src="/i/clear.gif" alt="" width="1" height="5" border="0"></td>
                 </tr>
                 <tr>
                   
                     <td background="/i/steel_gray_bg.gif" class="statTextBig" colspan="7" height="18">&#160;Problem Statement for RandomFights</td>
                   
                 </tr>
                 <tr>
                   <td colspan="7"><img src="/i/clear.gif" alt="" width="1" height="1" border="0"></td>
                 </tr>
                 <tr>
                   <td colspan="7"><img src="/i/clear.gif" alt="" width="1" height="1" border="0"></td>
                 </tr>
                 <tr>
                   <td class="problemText" valign="middle" align="left">
                      
              		<table><tr><td colspan="2" class="statText"><h3>Problem Statement</h3></td></tr><tr><td class="statText">&#160;&#160;&#160;&#160;</td><td class="statText"><p>
There are two teams <b>A</b> and <b>B</b>, each with exactly <b>n</b> members, that will compete in a contest to decide which team is better. The contest consists of <b>n</b> one-on-one fights, where a member of team <b>A</b> fights a member of team <b>B</b>. A valid fight arrangement of the teams assigns each member of team <b>A</b> to a distinct member of team <b>B</b>.  All valid pairings are equally likely to be chosen. For example, if each team has 2 fighters (A1, A2 and B1, B2), there are two possible assignments: (A1 vs. B2, A2 vs. B1) and (A1 vs. B1, A2 vs. B2).  Each of those assignments has a 50% chance of being chosen.
</p><p>
Each fighter has a non-negative integer strength.  If fighters with strengths X and Y are matched in a fight, the team of the fighter with the greater strength is awarded (X-Y)<sup>2</sup> points.  If both have equal strength, the fight ends in a tie and no team is awarded any points.  After all the fights are finished, each team adds up their points.  The winning margin of team A is their point total minus team B's point total.  You must calculate and return the expected value of that number.
</p><p>
To keep the input small, it will be codified in the following way.  You will be given two int[]s <b>A</b> and <b>B</b> representing team <b>A</b> and <b>B</b>, respectively.  Use the following pseudo-code on each of the int[]s to generate the strengths of that team's members (array indices are 0-based):
</p><pre>
input array: X
output array: R (of size n)
j := 0
m := size of X
for i := 0 to n-1
	R[i] := X[j]
	s := (j+1)%m
	X[j] := ( ( X[j] ^ X[s] ) + 13 ) % 49999
	j := s
</pre><p>
This code, along with the constraints, ensures that each member's strength is between 0 and 49998, inclusive.  In the above code, % is the modulo operator and ^ is the bitwise XOR binary operator.  See the notes section for information on performing XOR in your language.
</p></td></tr><tr><td colspan="2" class="statText">&#160;</td></tr><tr><td colspan="2" class="statText"><h3>Definition</h3></td></tr><tr><td class="statText">&#160;&#160;&#160;&#160;</td><td class="statText"><table><tr><td class="statText">Class:</td><td class="statText">RandomFights</td></tr><tr><td class="statText">Method:</td><td class="statText">expectedNrOfPoints</td></tr><tr><td class="statText">Parameters:</td><td class="statText">int[], int[], int</td></tr><tr><td class="statText">Returns:</td><td class="statText">double</td></tr><tr><td class="statText">Method signature:</td><td class="statText">double expectedNrOfPoints(int[] A, int[] B, int n)</td></tr><tr><td colspan="2" class="statText">(be sure your method is public)</td></tr></table></td></tr><tr><td class="statText">&#160;&#160;&#160;&#160;</td></tr><tr><td class="statText"></td></tr><tr><td colspan="2" class="statText">&#160;</td></tr><tr><td colspan="2" class="statText"><h3>Notes</h3></td></tr><tr><td align="center" valign="top" class="statText">-</td><td class="statText">The input is only coded for convenience. The intended solution does not rely at all in a property of the way it is generated, it just generates both arrays and works on them.</td></tr><tr><td align="center" valign="top" class="statText">-</td><td class="statText">The returned value must have an absolute or relative error less than 1e-9. </td></tr><tr><td align="center" valign="top" class="statText">-</td><td class="statText">If x and y are ints, (x^y) represents the bitwise XOR operation on them in C++, Java, C# and Python. In VB.Net (x BitXor y) does it.</td></tr><tr><td colspan="2" class="statText">&#160;</td></tr><tr><td colspan="2" class="statText"><h3>Constraints</h3></td></tr><tr><td align="center" valign="top" class="statText">-</td><td class="statText"><b>A</b> and <b>B</b> will each contain between 1 and 50 elements, inclusive.</td></tr><tr><td align="center" valign="top" class="statText">-</td><td class="statText">Each element of <b>A</b> and <b>B</b> will be between 0 and 49998, inclusive.</td></tr><tr><td align="center" valign="top" class="statText">-</td><td class="statText"><b>n</b> will be between 1 and 50000, inclusive.</td></tr><tr><td colspan="2" class="statText">&#160;</td></tr><tr><td colspan="2" class="statText"><h3>Examples</h3></td></tr><tr><td align="center" nowrap="true" class="statText">0)</td><td class="statText"></td></tr><tr><td class="statText">&#160;&#160;&#160;&#160;</td><td class="statText"><table><tr><td class="statText"><table><tr><td class="statText"><pre>{6}</pre></td></tr><tr><td class="statText"><pre>{4}</pre></td></tr><tr><td class="statText"><pre>1</pre></td></tr></table></td></tr><tr><td class="statText"><pre>Returns: 4.0</pre></td></tr><tr><td class="statText"><table><tr><td colspan="2" class="statText">The winning margin of A is always (6-4)<sup>2</sup>=4.</td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true" class="statText">1)</td><td class="statText"></td></tr><tr><td class="statText">&#160;&#160;&#160;&#160;</td><td class="statText"><table><tr><td class="statText"><table><tr><td class="statText"><pre>{1,7}</pre></td></tr><tr><td class="statText"><pre>{3,5}</pre></td></tr><tr><td class="statText"><pre>2</pre></td></tr></table></td></tr><tr><td class="statText"><pre>Returns: 0.0</pre></td></tr><tr><td class="statText"><table><tr><td colspan="2" class="statText">There are two possible assignments here: (1 vs. 3) and (7 vs. 5), or (1 vs. 5) and (7 vs. 3).  In the first case, each team gets 4 points, so the winning margin of A is 0.  In the second case, each team gets 16 points, so the winning margin is also 0.  Since the winning margin is 0 in every case, the expected value is, of course, 0.</td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true" class="statText">2)</td><td class="statText"></td></tr><tr><td class="statText">&#160;&#160;&#160;&#160;</td><td class="statText"><table><tr><td class="statText"><table><tr><td class="statText"><pre>{3,7}</pre></td></tr><tr><td class="statText"><pre>{1,5}</pre></td></tr><tr><td class="statText"><pre>2</pre></td></tr></table></td></tr><tr><td class="statText"><pre>Returns: 20.0</pre></td></tr><tr><td class="statText"><table><tr><td colspan="2" class="statText">The two possible assignments in this case are: (3 vs. 1) and (7 vs. 5), or (3 vs. 5) and (7 vs. 1).  The winning margin in the first case is 4+4=8, and in the second case, it is 36-4=32.  Since both assignments are equally likely to be chosen, the expected value is the average of the two margins.</td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true" class="statText">3)</td><td class="statText"></td></tr><tr><td class="statText">&#160;&#160;&#160;&#160;</td><td class="statText"><table><tr><td class="statText"><table><tr><td class="statText"><pre>{45,35,236,2342,5543,21,32,2,6,23,24,23,41,1}</pre></td></tr><tr><td class="statText"><pre>{2345,45,2345,345}</pre></td></tr><tr><td class="statText"><pre>50</pre></td></tr></table></td></tr><tr><td class="statText"><pre>Returns: 1.2721986164E8</pre></td></tr><tr><td class="statText"><table><tr><td colspan="2" class="statText"><b>A</b> and <b>B</b> can have different lengths.  Each one is generated separately.</td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true" class="statText">4)</td><td class="statText"></td></tr><tr><td class="statText">&#160;&#160;&#160;&#160;</td><td class="statText"><table><tr><td class="statText"><table><tr><td class="statText"><pre>{34,3245,2534,53,53,46,346,246,346,2,624,624,6,245,6324,6542,624,6}</pre></td></tr><tr><td class="statText"><pre>{345,234,523,4624,6,2456,345,634,634,7,3457,376,34,6234,62,523,52,35,32}</pre></td></tr><tr><td class="statText"><pre>7</pre></td></tr></table></td></tr><tr><td class="statText"><pre>Returns: -9713701.714285715</pre></td></tr><tr><td class="statText"><table><tr><td colspan="2" class="statText">You can have extra unused elements in the input.</td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true" class="statText">5)</td><td class="statText"></td></tr><tr><td class="statText">&#160;&#160;&#160;&#160;</td><td class="statText"><table><tr><td class="statText"><table><tr><td class="statText"><pre>{1,2,3,4}</pre></td></tr><tr><td class="statText"><pre>{1,2,3,4}</pre></td></tr><tr><td class="statText"><pre>50000</pre></td></tr></table></td></tr><tr><td class="statText"><pre>Returns: 0.0</pre></td></tr><tr><td class="statText"><table><tr><td colspan="2" class="statText">If both teams are that even, neither of them can take advantage.</td></tr></table></td></tr></table></td></tr></table><hr><p>This problem statement is the exclusive and proprietary property of TopCoder, Inc.  Any unauthorized use or reproduction of this information without the prior written consent of TopCoder, Inc. is strictly prohibited.  (c)2010, TopCoder, Inc.  All rights reserved.  </p>
                      
                   </td>
                 </tr>
                 <tr>
                   <td colspan="7"><img src="/i/clear.gif" alt="" width="1" height="3" border="0"></td>
                 </tr>
                 <tr>
                   <td background="/i/steel_blue_bg.gif" class="statText" colspan="7"><img src="/i/clear.gif" alt="" width="1" height="5" border="0"></td>
                 </tr>
                 <tr>
                   <td class="statText" colspan="7"><img src="/i/clear.gif" alt="" width="1" height="16" border="0"></td>
                 </tr>
                 <tr>
                   <td class="statText" colspan="7">
                      This problem was used for:
   
   	<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="/tc?module=ProblemDetail&rd=10659&pm=7384">Single Round Match 335 Round 1 - Division I, Level Three</a>
   
                   
                   </td>
                 </tr>


               </table>
             </td>
           </tr>
           <tr>
             <td width="100%"><img src="/i/clear.gif" alt="" width="1" height="10" border="0"></td>
           </tr>
         </table>
</body>
</html>
