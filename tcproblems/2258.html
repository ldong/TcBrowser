<html>
<head>
<title>Â Problem Statement for RussianDolls</title>
</head>
<body>
<table border="0" cellspacing="0" cellpadding="10" width="100%">
           <tr>
             <td valign="top" width="100%"><img src="/i/clear.gif" alt="" width="240" height="1" border="0"><br>
               <table border="0" cellspacing="0" cellpadding="0" width="100%">
                 <tr>
                   <td colspan="7"><img src="/i/clear.gif" alt="" width="1" height="1" border="0"></td>
                 </tr>
                 <tr>
                   <td colspan="7"><img src="/i/clear.gif" alt="" width="1" height="5" border="0"></td>
                 </tr>
                 <tr>
                   
                     <td background="/i/steel_gray_bg.gif" class="statTextBig" colspan="7" height="18">&#160;Problem Statement for RussianDolls</td>
                   
                 </tr>
                 <tr>
                   <td colspan="7"><img src="/i/clear.gif" alt="" width="1" height="1" border="0"></td>
                 </tr>
                 <tr>
                   <td colspan="7"><img src="/i/clear.gif" alt="" width="1" height="1" border="0"></td>
                 </tr>
                 <tr>
                   <td class="problemText" valign="middle" align="left">
                      
              		<table><tr><td colspan="2" class="statText"><h3>Problem Statement</h3></td></tr><tr><td class="statText">&#160;&#160;&#160;&#160;</td><td class="statText"><p><i>Note to plugin users: there are html elements in this statement that will not appear correct in plugins.  Please use the statement to view them.</i></p>

<p>
Russian Nesting Dolls are a set of dolls which nest inside each other.  The dolls are constructed in such a way that each doll will fit comfortably inside any larger doll, and no two dolls are the same size.  There are a finite number of ways to nest dolls inside one another so that a specific subset of the dolls is visible.  For example, with 3 dolls, there is only one way that they could be nested such that only the largest doll is visible, but there are 2 ways to nest the dolls if the largest and medium doll are visible (depending on which of the two larger dolls the smallest doll is inside).  In addition, if you are just given how many dolls are visible, there may be even more ways that the dolls could be nested.  For example, if you know there are 2 dolls visible in a 3-doll set, there are 3 ways they could be nested (see example 0).
</p>

<p>
Your clever friend has used an entire set of <b>N</b> nesting dolls in an arrangement on a table.  He assures you that all the nesting dolls are on the table, but you can only see a subset of the dolls.  In addition, he has placed a piece of cardboard in front of some of the dolls so that you cannot see which ones they are, and he tells you how many are behind the board.  He asks you how many possible ways he could have arranged the dolls such that the current configuration is on the table.
</p>

<p>
Each doll has a number painted on it from 1 to <b>N</b>, which identifies the size of the doll.  You can fit a doll labeled <i>i</i> inside a doll labeled <i>j</i> as long as <i>i &lt; j</i>.  Your program will be given an int <b>N</b>, identifying how many dolls there are in the set, a int[] <b>visible</b>, identifying which dolls you can see on the table, and an int <b>hidden</b>, identifying how many more dolls would be visible if the board was removed.  Two arrangements are different if any doll is nested immediately inside a different doll, or is nested in one arrangement but not in the other.
</p></td></tr><tr><td colspan="2" class="statText">&#160;</td></tr><tr><td colspan="2" class="statText"><h3>Definition</h3></td></tr><tr><td class="statText">&#160;&#160;&#160;&#160;</td><td class="statText"><table><tr><td class="statText">Class:</td><td class="statText">RussianDolls</td></tr><tr><td class="statText">Method:</td><td class="statText">arrangements</td></tr><tr><td class="statText">Parameters:</td><td class="statText">int, int[], int</td></tr><tr><td class="statText">Returns:</td><td class="statText">long</td></tr><tr><td class="statText">Method signature:</td><td class="statText">long arrangements(int N, int[] visible, int hidden)</td></tr><tr><td colspan="2" class="statText">(be sure your method is public)</td></tr></table></td></tr><tr><td class="statText">&#160;&#160;&#160;&#160;</td></tr><tr><td class="statText"></td></tr><tr><td colspan="2" class="statText">&#160;</td></tr><tr><td colspan="2" class="statText"><h3>Notes</h3></td></tr><tr><td align="center" valign="top" class="statText">-</td><td class="statText">The constraints are constructed so the return value will be &lt;= 2<sup>63</sup> - 1.</td></tr><tr><td colspan="2" class="statText">&#160;</td></tr><tr><td colspan="2" class="statText"><h3>Constraints</h3></td></tr><tr><td align="center" valign="top" class="statText">-</td><td class="statText"><b>N</b> will be between 2 and 25, inclusive.</td></tr><tr><td align="center" valign="top" class="statText">-</td><td class="statText"><b>hidden</b> will be between 0 and <b>N</b>, inclusive.</td></tr><tr><td align="center" valign="top" class="statText">-</td><td class="statText"><b>visible</b> will have between 0 and <b>N</b>-<b>hidden</b> elements, inclusive.</td></tr><tr><td align="center" valign="top" class="statText">-</td><td class="statText">Each element of <b>visible</b> will be between 1 and <b>N</b>, inclusive.</td></tr><tr><td align="center" valign="top" class="statText">-</td><td class="statText">There will be no repeated elements in <b>visible</b>.</td></tr><tr><td align="center" valign="top" class="statText">-</td><td class="statText">There will be at least one configuration which is possible given the arguments.</td></tr><tr><td colspan="2" class="statText">&#160;</td></tr><tr><td colspan="2" class="statText"><h3>Examples</h3></td></tr><tr><td align="center" nowrap="true" class="statText">0)</td><td class="statText"></td></tr><tr><td class="statText">&#160;&#160;&#160;&#160;</td><td class="statText"><table><tr><td class="statText"><table><tr><td class="statText"><pre>3</pre></td></tr><tr><td class="statText"><pre>{}</pre></td></tr><tr><td class="statText"><pre>2</pre></td></tr></table></td></tr><tr><td class="statText"><pre>Returns: 3</pre></td></tr><tr><td class="statText"><table><tr><td colspan="2" class="statText">There are three dolls, two of which are behind the board.  Since no dolls are showing, the third doll must be nested inside one of the other two.  There are three possibilities:<br>
1 and 3 are behind the board, 2 is nested inside 3<br>
2 and 3 are behind the board, 1 is nested inside 2<br>
2 and 3 are behind the board, 1 is nested inside 3</td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true" class="statText">1)</td><td class="statText"></td></tr><tr><td class="statText">&#160;&#160;&#160;&#160;</td><td class="statText"><table><tr><td class="statText"><table><tr><td class="statText"><pre>3</pre></td></tr><tr><td class="statText"><pre>{2}</pre></td></tr><tr><td class="statText"><pre>1</pre></td></tr></table></td></tr><tr><td class="statText"><pre>Returns: 2</pre></td></tr><tr><td class="statText"><table><tr><td colspan="2" class="statText">In this case, doll 2 is showing.  Since there is only one doll behind the board, it must be doll 3.  The only unknown is doll 1.  It could either be nested in doll 3 or doll 2.</td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true" class="statText">2)</td><td class="statText"></td></tr><tr><td class="statText">&#160;&#160;&#160;&#160;</td><td class="statText"><table><tr><td class="statText"><table><tr><td class="statText"><pre>9</pre></td></tr><tr><td class="statText"><pre>{9}</pre></td></tr><tr><td class="statText"><pre>1</pre></td></tr></table></td></tr><tr><td class="statText"><pre>Returns: 255</pre></td></tr><tr><td class="statText"><table><tr><td colspan="2" class="statText">Dolls 1-8 could either be behind the board or inside doll 9.  However, the case where 1-8 are all inside of 9 is not possible, because then there wouldn't be a doll behind the board.  So the answer is 2<sup>8</sup> - 1.</td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true" class="statText">3)</td><td class="statText"></td></tr><tr><td class="statText">&#160;&#160;&#160;&#160;</td><td class="statText"><table><tr><td class="statText"><table><tr><td class="statText"><pre>20</pre></td></tr><tr><td class="statText"><pre>{13,5,2,18}</pre></td></tr><tr><td class="statText"><pre>3</pre></td></tr></table></td></tr><tr><td class="statText"><pre>Returns: 7163268480</pre></td></tr><tr><td class="statText"></td></tr></table></td></tr></table><hr><p>This problem statement is the exclusive and proprietary property of TopCoder, Inc.  Any unauthorized use or reproduction of this information without the prior written consent of TopCoder, Inc. is strictly prohibited.  (c)2010, TopCoder, Inc.  All rights reserved.  </p>
                      
                   </td>
                 </tr>
                 <tr>
                   <td colspan="7"><img src="/i/clear.gif" alt="" width="1" height="3" border="0"></td>
                 </tr>
                 <tr>
                   <td background="/i/steel_blue_bg.gif" class="statText" colspan="7"><img src="/i/clear.gif" alt="" width="1" height="5" border="0"></td>
                 </tr>
                 <tr>
                   <td class="statText" colspan="7"><img src="/i/clear.gif" alt="" width="1" height="16" border="0"></td>
                 </tr>
                 <tr>
                   <td class="statText" colspan="7">
                      This problem was used for:
   
   	<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="/tc?module=ProblemDetail&rd=5079&pm=2258">2004 TCCC Wildcard Round - Division I, Level Two</a>
   
                   
                   </td>
                 </tr>


               </table>
             </td>
           </tr>
           <tr>
             <td width="100%"><img src="/i/clear.gif" alt="" width="1" height="10" border="0"></td>
           </tr>
         </table>
</body>
</html>
