<html>
<head>
<title>Â Problem Statement for SnakesOnAPlane</title>
</head>
<body>
<table border="0" cellspacing="0" cellpadding="10" width="100%">
           <tr>
             <td valign="top" width="100%"><img src="/i/clear.gif" alt="" width="240" height="1" border="0"><br>
               <table border="0" cellspacing="0" cellpadding="0" width="100%">
                 <tr>
                   <td colspan="7"><img src="/i/clear.gif" alt="" width="1" height="1" border="0"></td>
                 </tr>
                 <tr>
                   <td colspan="7"><img src="/i/clear.gif" alt="" width="1" height="5" border="0"></td>
                 </tr>
                 <tr>
                   
                     <td background="/i/steel_gray_bg.gif" class="statTextBig" colspan="7" height="18">&#160;Problem Statement for SnakesOnAPlane</td>
                   
                 </tr>
                 <tr>
                   <td colspan="7"><img src="/i/clear.gif" alt="" width="1" height="1" border="0"></td>
                 </tr>
                 <tr>
                   <td colspan="7"><img src="/i/clear.gif" alt="" width="1" height="1" border="0"></td>
                 </tr>
                 <tr>
                   <td class="problemText" valign="middle" align="left">
                      
              		<table><tr><td colspan="2" class="statText"><h3>Problem Statement</h3></td></tr><tr><td class="statText">&#160;&#160;&#160;&#160;</td><td class="statText"><p>
<i>NOTE: This problem contains images that may not be displayed properly if viewed outside the contest applet.</i>
</p>

<p>
The Cartesian plane is covered with snakes.
You will be given a rectangular portion of the plane, divided into a grid of squares.
Each square will either contain a segment of a snake or a barrier.
</p>

<p>
Each snake occupies a chain of adjacent squares, connected horizontally and/or vertically.
Snakes are at least 2 segments long (one segment per square) and cannot overlap each other or themselves.
Each snake must meet at least one of the following two conditions (see the figures below for examples):
</p>

<ol>
<li>Both endpoints must be in squares on the edge of the rectangle.</li>
<li>Both endpoints must be horizontally or vertically adjacent to each other,
and the snake is at least 4 segments long (so the snake forms a loop).</li>
</ol>

<p>
The portion of the plane will be given as a String <b>grid</b>,
where each character represents one square.
A '#' represents a barrier and a '.' (period) represents a square that contains a segment of a snake.
Fill the grid with snakes so that all of the non-barrier squares are filled.  Do this in such a way that minimizes n, the number of snakes whose endpoints are not adjacent (and therefore, must be on the edge of the grid).  Return n, or return -1 if there is no way to fill every non-barrier square.
</p>

<p>
For example, the grid defined by the following input:
</p>

<pre>

    { "......",
      ".#.##.",
      ".#....",
      "....#.",
      ".##.#.",
      "......" }
</pre>

<p>
can be filled with snakes in several ways and a few are shown in the figures below:
</p>

<br>
<center>
<img src="http://www.topcoder.com/contest/problem/SnakesOnAPlane/snakes1.gif">
<img src="http://www.topcoder.com/contest/problem/SnakesOnAPlane/black10.gif">
<img src="http://www.topcoder.com/contest/problem/SnakesOnAPlane/snakes2.gif">
<img src="http://www.topcoder.com/contest/problem/SnakesOnAPlane/black10.gif">
<img src="http://www.topcoder.com/contest/problem/SnakesOnAPlane/snakes0.gif">
</center>

<p>
In each figure, there are 2 snakes that do not form a loop.
There is no way to fill the grid with only 1, so 2 is the correct answer for this input.
</p></td></tr><tr><td colspan="2" class="statText">&#160;</td></tr><tr><td colspan="2" class="statText"><h3>Definition</h3></td></tr><tr><td class="statText">&#160;&#160;&#160;&#160;</td><td class="statText"><table><tr><td class="statText">Class:</td><td class="statText">SnakesOnAPlane</td></tr><tr><td class="statText">Method:</td><td class="statText">snakes</td></tr><tr><td class="statText">Parameters:</td><td class="statText">String[]</td></tr><tr><td class="statText">Returns:</td><td class="statText">int</td></tr><tr><td class="statText">Method signature:</td><td class="statText">int snakes(String[] grid)</td></tr><tr><td colspan="2" class="statText">(be sure your method is public)</td></tr></table></td></tr><tr><td class="statText">&#160;&#160;&#160;&#160;</td></tr><tr><td class="statText"></td></tr><tr><td colspan="2" class="statText">&#160;</td></tr><tr><td colspan="2" class="statText"><h3>Constraints</h3></td></tr><tr><td align="center" valign="top" class="statText">-</td><td class="statText"><b>grid</b> will contain between 1 and 12 elements, inclusive.</td></tr><tr><td align="center" valign="top" class="statText">-</td><td class="statText">Each element of <b>grid</b> will contain the same number of characters, between 1 and 12, inclusive.</td></tr><tr><td align="center" valign="top" class="statText">-</td><td class="statText">Each element of <b>grid</b> will contain only the characters '#' and '.' (period).</td></tr><tr><td colspan="2" class="statText">&#160;</td></tr><tr><td colspan="2" class="statText"><h3>Examples</h3></td></tr><tr><td align="center" nowrap="true" class="statText">0)</td><td class="statText"></td></tr><tr><td class="statText">&#160;&#160;&#160;&#160;</td><td class="statText"><table><tr><td class="statText"><table><tr><td class="statText"><pre>{ &quot;......&quot;,
  &quot;.#.##.&quot;,
  &quot;.#....&quot;,
  &quot;....#.&quot;,
  &quot;.##.#.&quot;,
  &quot;......&quot; }</pre></td></tr></table></td></tr><tr><td class="statText"><pre>Returns: 2</pre></td></tr><tr><td class="statText"><table><tr><td colspan="2" class="statText">This is the example from the problem statement.</td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true" class="statText">1)</td><td class="statText"></td></tr><tr><td class="statText">&#160;&#160;&#160;&#160;</td><td class="statText"><table><tr><td class="statText"><table><tr><td class="statText"><pre>{ &quot;###.###&quot;,
  &quot;###.###&quot;,
  &quot;.......&quot;,
  &quot;###.###&quot;,
  &quot;###.###&quot; }</pre></td></tr></table></td></tr><tr><td class="statText"><pre>Returns: -1</pre></td></tr><tr><td class="statText"><table><tr><td colspan="2" class="statText">This grid cannot be filled without two snakes overlapping.</td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true" class="statText">2)</td><td class="statText"></td></tr><tr><td class="statText">&#160;&#160;&#160;&#160;</td><td class="statText"><table><tr><td class="statText"><table><tr><td class="statText"><pre>{ &quot;#.....##&quot;,
  &quot;...#....&quot;,
  &quot;........&quot;,
  &quot;..#.#.#.&quot;,
  &quot;......#.&quot;,
  &quot;...#..#.&quot;,
  &quot;#.......&quot; }
</pre></td></tr></table></td></tr><tr><td class="statText"><pre>Returns: 1</pre></td></tr><tr><td class="statText"><table><tr><td colspan="2" class="statText">This grid can be filled by a single snake, as shown in this figure:

<img src="http://www.topcoder.com/contest/problem/SnakesOnAPlane/snakes3.gif">
</td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true" class="statText">3)</td><td class="statText"></td></tr><tr><td class="statText">&#160;&#160;&#160;&#160;</td><td class="statText"><table><tr><td class="statText"><table><tr><td class="statText"><pre>{ &quot;###########&quot;,
  &quot;#......#...&quot;,
  &quot;#.####.#...&quot;,
  &quot;#.#..#.####&quot;,
  &quot;#.#..#.####&quot;,
  &quot;#.####.#..#&quot;,
  &quot;#......#..#&quot;,
  &quot;###########&quot; }</pre></td></tr></table></td></tr><tr><td class="statText"><pre>Returns: 0</pre></td></tr><tr><td class="statText"><table><tr><td colspan="2" class="statText">This grid can be completely filled with 4 snakes that form a loop.
You do not need to count these, so the answer is 0.</td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true" class="statText">4)</td><td class="statText"></td></tr><tr><td class="statText">&#160;&#160;&#160;&#160;</td><td class="statText"><table><tr><td class="statText"><table><tr><td class="statText"><pre>{ &quot;####.######&quot;,
  &quot;#.........#&quot;,
  &quot;..........#&quot;,
  &quot;#..........&quot;,
  &quot;#.........#&quot;,
  &quot;#####.#####&quot; }
</pre></td></tr></table></td></tr><tr><td class="statText"><pre>Returns: -1</pre></td></tr><tr><td class="statText"><table><tr><td colspan="2" class="statText"></td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true" class="statText">5)</td><td class="statText"></td></tr><tr><td class="statText">&#160;&#160;&#160;&#160;</td><td class="statText"><table><tr><td class="statText"><table><tr><td class="statText"><pre>{ &quot;##&quot;,
  &quot;#.&quot; }
</pre></td></tr></table></td></tr><tr><td class="statText"><pre>Returns: -1</pre></td></tr><tr><td class="statText"><table><tr><td colspan="2" class="statText">Snakes must be at least 2 segments long.</td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true" class="statText">6)</td><td class="statText"></td></tr><tr><td class="statText">&#160;&#160;&#160;&#160;</td><td class="statText"><table><tr><td class="statText"><table><tr><td class="statText"><pre>{ &quot;.&quot;, &quot;.&quot; }</pre></td></tr></table></td></tr><tr><td class="statText"><pre>Returns: 1</pre></td></tr><tr><td class="statText"><table><tr><td colspan="2" class="statText"></td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true" class="statText">7)</td><td class="statText"></td></tr><tr><td class="statText">&#160;&#160;&#160;&#160;</td><td class="statText"><table><tr><td class="statText"><table><tr><td class="statText"><pre>{ &quot;#&quot; }</pre></td></tr></table></td></tr><tr><td class="statText"><pre>Returns: 0</pre></td></tr><tr><td class="statText"><table><tr><td colspan="2" class="statText"></td></tr></table></td></tr></table></td></tr></table><hr><p>This problem statement is the exclusive and proprietary property of TopCoder, Inc.  Any unauthorized use or reproduction of this information without the prior written consent of TopCoder, Inc. is strictly prohibited.  (c)2010, TopCoder, Inc.  All rights reserved.  </p>
                      
                   </td>
                 </tr>
                 <tr>
                   <td colspan="7"><img src="/i/clear.gif" alt="" width="1" height="3" border="0"></td>
                 </tr>
                 <tr>
                   <td background="/i/steel_blue_bg.gif" class="statText" colspan="7"><img src="/i/clear.gif" alt="" width="1" height="5" border="0"></td>
                 </tr>
                 <tr>
                   <td class="statText" colspan="7"><img src="/i/clear.gif" alt="" width="1" height="16" border="0"></td>
                 </tr>
                 <tr>
                   <td class="statText" colspan="7">
                      This problem was used for:
   
   	<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="/tc?module=ProblemDetail&rd=12019&pm=8603">2008 TopCoder Open Championship Round - Division I, Level Three</a>
   
                   
                   </td>
                 </tr>


               </table>
             </td>
           </tr>
           <tr>
             <td width="100%"><img src="/i/clear.gif" alt="" width="1" height="10" border="0"></td>
           </tr>
         </table>
</body>
</html>
