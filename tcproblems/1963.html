<html>
<head>
<title>Â Problem Statement for NCushion</title>
</head>
<body>
<table border="0" cellspacing="0" cellpadding="10" width="100%">
           <tr>
             <td valign="top" width="100%"><img src="/i/clear.gif" alt="" width="240" height="1" border="0"><br>
               <table border="0" cellspacing="0" cellpadding="0" width="100%">
                 <tr>
                   <td colspan="7"><img src="/i/clear.gif" alt="" width="1" height="1" border="0"></td>
                 </tr>
                 <tr>
                   <td colspan="7"><img src="/i/clear.gif" alt="" width="1" height="5" border="0"></td>
                 </tr>
                 <tr>
                   
                     <td background="/i/steel_gray_bg.gif" class="statTextBig" colspan="7" height="18">&#160;Problem Statement for NCushion</td>
                   
                 </tr>
                 <tr>
                   <td colspan="7"><img src="/i/clear.gif" alt="" width="1" height="1" border="0"></td>
                 </tr>
                 <tr>
                   <td colspan="7"><img src="/i/clear.gif" alt="" width="1" height="1" border="0"></td>
                 </tr>
                 <tr>
                   <td class="problemText" valign="middle" align="left">
                      
              		<table><tr><td colspan="2" class="statText"><h3>Problem Statement</h3></td></tr><tr><td class="statText">&#160;&#160;&#160;&#160;</td><td class="statText"><i>Note to plugin users: There are images in this problem statement, please use the applet to view them</i>
<p>
Three cushion billiards is a form of Carombole, a French game of billiards.  The game is played on a standard billiard table with no pockets, and with three balls: two white cue balls and one red ball.  Each player must hit his/her own cue ball such that it hits at least three cushions (or sides), the opponent's cue ball, and the red ball.  The cue ball can hit the cushions and the other two balls in any order, but it must hit the cushions before the last ball is hit.  These cushions need not be different. For example, you could hit one cushion, then the opposite, then hit the first cushion again, and this counts as 3 cushions.
</p>

<p>
We're going to invent a new game called N-Cushion billiards, where you only have to hit your opponent's cue ball (there is no red ball), but the number of cushions you must hit before hitting the opponent's ball can be up to 500.  In the original game, you could hit more than three cushions, but in this game, you must hit the specified number of cushions exactly.
</p>

<p>
When a ball bounces off a cushion, the path the ball takes is very similar to light reflecting off a mirror.  The image below shows a ball (in red) &quot;reflecting&quot; off a cushion.  Notice how the angle of incidence (designated by the ? symbol) is the same on both sides of the reflection.
</p>

<p>
<img src="http://172.16.100.15/contest/problem/NCushion/reflection.png">
</p>
<p>
When a ball goes exactly into a corner, the ball hits both cushions simultaneously (this counts as hitting two cushions), and reflects back exactly in the opposite direction.
</p>

<p>
Our coordinate system is going to be in millimeters, and points will be written as (X,Y).  The table is 2 meters by 1 meter, with the long side lying on the X-axis.  The lower left corner is given the coordinate (0,0) and the upper right corner is given the coordinate (2000,1000).  You will be given two coordinates in a int[] <b>cue</b> representing your ball, and a int[] <b>opponent</b> representing your opponent's ball.  Each int[] will contain exactly 2 elements, the first being the X position, and the second being the Y position.  Finally, you will be given an int <b>N</b>, which is the number of cushions your ball must hit before htting the opponent's ball.  Your method must return the number of different directions in which you can hit your ball so that it hits the given number of cushions and finally hits the opponent's ball.  For the purposes of this problem, assume the balls have no physical size, but are just points in space -- this means your ball must hit the other ball dead on in order to hit it.  Remember that your ball cannot pass through the other ball in order to hit the correct number of cushions (see Example 1).
</p></td></tr><tr><td colspan="2" class="statText">&#160;</td></tr><tr><td colspan="2" class="statText"><h3>Definition</h3></td></tr><tr><td class="statText">&#160;&#160;&#160;&#160;</td><td class="statText"><table><tr><td class="statText">Class:</td><td class="statText">NCushion</td></tr><tr><td class="statText">Method:</td><td class="statText">numShots</td></tr><tr><td class="statText">Parameters:</td><td class="statText">int[], int[], int</td></tr><tr><td class="statText">Returns:</td><td class="statText">int</td></tr><tr><td class="statText">Method signature:</td><td class="statText">int numShots(int[] cue, int[] opponent, int N)</td></tr><tr><td colspan="2" class="statText">(be sure your method is public)</td></tr></table></td></tr><tr><td class="statText">&#160;&#160;&#160;&#160;</td></tr><tr><td class="statText"></td></tr><tr><td colspan="2" class="statText">&#160;</td></tr><tr><td colspan="2" class="statText"><h3>Notes</h3></td></tr><tr><td align="center" valign="top" class="statText">-</td><td class="statText">Assume there is no spin possible, and you cannot jump the ball.</td></tr><tr><td align="center" valign="top" class="statText">-</td><td class="statText">Assume there is no friction, so your ball does not slow down, and can always hit the required number of cushions.</td></tr><tr><td colspan="2" class="statText">&#160;</td></tr><tr><td colspan="2" class="statText"><h3>Constraints</h3></td></tr><tr><td align="center" valign="top" class="statText">-</td><td class="statText"><b>cue</b> will contain exactly two elements.</td></tr><tr><td align="center" valign="top" class="statText">-</td><td class="statText"><b>opponent</b> will contain exactly two elements.</td></tr><tr><td align="center" valign="top" class="statText">-</td><td class="statText"><b>cue</b>[0] and <b>opponent</b>[0] will be between 1 and 1999, inclusive.</td></tr><tr><td align="center" valign="top" class="statText">-</td><td class="statText"><b>cue</b>[1] and <b>opponent</b>[1] will be between 1 and 999, inclusive.</td></tr><tr><td align="center" valign="top" class="statText">-</td><td class="statText"><b>cue</b> and <b>opponent</b> will not contain the exact same coordinates.</td></tr><tr><td align="center" valign="top" class="statText">-</td><td class="statText"><b>N</b> will be between 0 and 500, inclusive.</td></tr><tr><td colspan="2" class="statText">&#160;</td></tr><tr><td colspan="2" class="statText"><h3>Examples</h3></td></tr><tr><td align="center" nowrap="true" class="statText">0)</td><td class="statText"></td></tr><tr><td class="statText">&#160;&#160;&#160;&#160;</td><td class="statText"><table><tr><td class="statText"><table><tr><td class="statText"><pre>{100,100}</pre></td></tr><tr><td class="statText"><pre>{1900,900}</pre></td></tr><tr><td class="statText"><pre>1</pre></td></tr></table></td></tr><tr><td class="statText"><pre>Returns: 4</pre></td></tr><tr><td class="statText"><table><tr><td colspan="2" class="statText">It is possible to hit the opponent's ball by bouncing yours off any of the four cushions first.</td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true" class="statText">1)</td><td class="statText"></td></tr><tr><td class="statText">&#160;&#160;&#160;&#160;</td><td class="statText"><table><tr><td class="statText"><table><tr><td class="statText"><pre>{100,100}</pre></td></tr><tr><td class="statText"><pre>{1900,100}</pre></td></tr><tr><td class="statText"><pre>1</pre></td></tr></table></td></tr><tr><td class="statText"><pre>Returns: 3</pre></td></tr><tr><td class="statText"><table><tr><td colspan="2" class="statText">It is possible to bounce your ball off the left, bottom, or top cushions, but in order to bounce it off of the right cushion, you would have to hit the ball through the opponent's ball.</td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true" class="statText">2)</td><td class="statText"></td></tr><tr><td class="statText">&#160;&#160;&#160;&#160;</td><td class="statText"><table><tr><td class="statText"><table><tr><td class="statText"><pre>{500,500}</pre></td></tr><tr><td class="statText"><pre>{1500,500}</pre></td></tr><tr><td class="statText"><pre>2</pre></td></tr></table></td></tr><tr><td class="statText"><pre>Returns: 6</pre></td></tr><tr><td class="statText"><table><tr><td colspan="2" class="statText">The 6 different shots are shown below.  The black filled circle is your ball's starting position, the white filled circle is the opponent's ball, and each colored line is a shot which bounces off of two cushions before hitting the other ball.<br>
<img src="http://172.16.100.15/contest/problem/NCushion/example2.png">
</td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true" class="statText">3)</td><td class="statText"></td></tr><tr><td class="statText">&#160;&#160;&#160;&#160;</td><td class="statText"><table><tr><td class="statText"><table><tr><td class="statText"><pre>{1222,440}</pre></td></tr><tr><td class="statText"><pre>{276,566}</pre></td></tr><tr><td class="statText"><pre>445</pre></td></tr></table></td></tr><tr><td class="statText"><pre>Returns: 1779</pre></td></tr><tr><td class="statText"><table><tr><td colspan="2" class="statText">A reasonably large example.</td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true" class="statText">4)</td><td class="statText"></td></tr><tr><td class="statText">&#160;&#160;&#160;&#160;</td><td class="statText"><table><tr><td class="statText"><table><tr><td class="statText"><pre>{20,25}</pre></td></tr><tr><td class="statText"><pre>{40,50}</pre></td></tr><tr><td class="statText"><pre>2</pre></td></tr></table></td></tr><tr><td class="statText"><pre>Returns: 8</pre></td></tr><tr><td class="statText"><table><tr><td colspan="2" class="statText">Don't forget the case where you hit the ball directly into the corner, that counts as hitting two cushions.</td></tr></table></td></tr></table></td></tr></table><hr><p>This problem statement is the exclusive and proprietary property of TopCoder, Inc.  Any unauthorized use or reproduction of this information without the prior written consent of TopCoder, Inc. is strictly prohibited.  (c)2010, TopCoder, Inc.  All rights reserved.  </p>
                      
                   </td>
                 </tr>
                 <tr>
                   <td colspan="7"><img src="/i/clear.gif" alt="" width="1" height="3" border="0"></td>
                 </tr>
                 <tr>
                   <td background="/i/steel_blue_bg.gif" class="statText" colspan="7"><img src="/i/clear.gif" alt="" width="1" height="5" border="0"></td>
                 </tr>
                 <tr>
                   <td class="statText" colspan="7"><img src="/i/clear.gif" alt="" width="1" height="16" border="0"></td>
                 </tr>
                 <tr>
                   <td class="statText" colspan="7">
                      This problem was used for:
   
   	<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="/tc?module=ProblemDetail&rd=4706&pm=1963">2003 TCO Semifinal Round 1 - Division I, Level Three</a>
   
                   
                   </td>
                 </tr>


               </table>
             </td>
           </tr>
           <tr>
             <td width="100%"><img src="/i/clear.gif" alt="" width="1" height="10" border="0"></td>
           </tr>
         </table>
</body>
</html>
