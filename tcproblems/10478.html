<html>
<head>
<title>Â Problem Statement for FoldingMaze</title>
</head>
<body>
<table border="0" cellspacing="0" cellpadding="10" width="100%">
           <tr>
             <td valign="top" width="100%"><img src="/i/clear.gif" alt="" width="240" height="1" border="0"><br>
               <table border="0" cellspacing="0" cellpadding="0" width="100%">
                 <tr>
                   <td colspan="7"><img src="/i/clear.gif" alt="" width="1" height="1" border="0"></td>
                 </tr>
                 <tr>
                   <td colspan="7"><img src="/i/clear.gif" alt="" width="1" height="5" border="0"></td>
                 </tr>
                 <tr>
                   
                     <td background="/i/steel_gray_bg.gif" class="statTextBig" colspan="7" height="18">&#160;Problem Statement for FoldingMaze</td>
                   
                 </tr>
                 <tr>
                   <td colspan="7"><img src="/i/clear.gif" alt="" width="1" height="1" border="0"></td>
                 </tr>
                 <tr>
                   <td colspan="7"><img src="/i/clear.gif" alt="" width="1" height="1" border="0"></td>
                 </tr>
                 <tr>
                   <td class="problemText" valign="middle" align="left">
                      
              		<table><tr><td colspan="2" class="statText"><h3>Problem Statement</h3></td></tr><tr><td class="statText">&#160;&#160;&#160;&#160;</td><td class="statText"><i>NOTE: This problem statement contains images that may not display properly if viewed outside of the applet.</i>
<br>
<br>
Alice loves mazes so much that she spends most of her spare time drawing new mazes on sheets of graph paper.  These mazes work as follows.  Every cell is either an empty space or a wall.  One of the empty cells is the starting cell and one of the other empty cells is the ending cell.  To solve the maze, you must draw a path from the starting cell to the ending cell without lifting your pen.  From each cell, you are only allowed to move to an empty neighboring cell.  Two cells are neighbors if they share a common side.<br>
<br>
Alice is so obsessed that she forces her friend Bob to solve her mazes over and over again.  Lately, she began cheating by making her mazes unsolvable.  However, Bob, being an avid cheater himself, discovered that he could solve those mazes by folding the sheet of paper until the maze became solvable.  Alice did not initially like the fact that Bob had thwarted her attempts to make unsolvable mazes, but she eventually figured out that drawing mazes that can only be solved by folding the paper would be far more interesting than drawing unsolvable mazes.<br>
<br>
Alice came up with a new method of creating mazes and a new set of rules.  She now draws on both sides of the graph paper.  The starting cell is always on the front, but the ending cell may be on either side.  Bob must put the sheet of paper on a table with the front side facing up.  On each move, he must do one of the following:<br>
<ul>
<li>Move to an empty neighboring cell.  The rules here are the same as before.  He can only move to cells that are currently visible.</li>
<li>Fold the paper once.  This is only allowed if the paper is not already in a folded state.  The folding line must coincide with a vertical line on the graph paper's grid.  The fold must not cover the cell in which Bob is currently located. Horizontal, diagonal or any fold operation with a folding line that does not coincide with a vertical grid line are considered illegal.</li>
<li>Unfold the paper if it's currently folded.  This will return the paper to its initial state.  This is only allowed if doing so will not remove the current cell from view.</li>
</ul><br>
<br>
For example, consider the following case in which we can see both sides of the sheet (the back side depicted is the part of the sheet that would be visible after rotating it 180 degrees about the vertical axis): <br>
<br>
<img src="http://www.topcoder.com/contest/problem/FoldingMaze/f1.png"><br>
<br>
In this case, the third vertical line from the left is used as a folding line.<br>
<img src="http://www.topcoder.com/contest/problem/FoldingMaze/f2.png"><br>
<br>
After folding the paper, it is now possible to move from the starting cell to the second cell from the left in the top row.  After that, the paper is unfolded.<br>
<img src="http://www.topcoder.com/contest/problem/FoldingMaze/f3.png"><br>
<br>
Then, move one cell to the right and perform another fold.<br>
<img src="http://www.topcoder.com/contest/problem/FoldingMaze/f4.png"><br>
<br>
Notice that you can fold up either the right or left side of the paper as long as you follow all the rules.  After the second fold, the ending cell becomes visible, and it is now possible to move there.<br>
<br>
Your task is to help Bob cheat by determining the fastest way to solve these mazes.  You are given String[]s <b>frontSide</b> and <b>backSide</b>, describing the front and back sides of the paper, respectively.  The j-th character of the i-th element of each String[] represents the cell at row i, column j.  Empty cells are denoted by '.', walls are denoted by '#', the starting cell is denoted by 'S' and the ending cell is denoted by 'E'.  <b>backSide</b> describes what you would see if you flipped the paper over by rotating it 180 degrees about the vertical axis.  Return the minimum number of steps required to solve the maze.  If it is not possible to solve the maze, return -1 instead.</td></tr><tr><td colspan="2" class="statText">&#160;</td></tr><tr><td colspan="2" class="statText"><h3>Definition</h3></td></tr><tr><td class="statText">&#160;&#160;&#160;&#160;</td><td class="statText"><table><tr><td class="statText">Class:</td><td class="statText">FoldingMaze</td></tr><tr><td class="statText">Method:</td><td class="statText">solve</td></tr><tr><td class="statText">Parameters:</td><td class="statText">String[], String[]</td></tr><tr><td class="statText">Returns:</td><td class="statText">int</td></tr><tr><td class="statText">Method signature:</td><td class="statText">int solve(String[] frontSide, String[] backSide)</td></tr><tr><td colspan="2" class="statText">(be sure your method is public)</td></tr></table></td></tr><tr><td class="statText">&#160;&#160;&#160;&#160;</td></tr><tr><td class="statText"></td></tr><tr><td colspan="2" class="statText">&#160;</td></tr><tr><td colspan="2" class="statText"><h3>Constraints</h3></td></tr><tr><td align="center" valign="top" class="statText">-</td><td class="statText"><b>frontSide</b> and <b>backSide</b> will contain an equal number of elements h, where h is between 2 and 50, inclusive.</td></tr><tr><td align="center" valign="top" class="statText">-</td><td class="statText">Each element of <b>frontSide</b> and <b>backSide</b> will contain an equal number of characters w, where w is between 2 and 50, inclusive.</td></tr><tr><td align="center" valign="top" class="statText">-</td><td class="statText">Each element of <b>frontSide</b> and <b>backSide</b> will contain only '#', '.', 'S' or 'E' as characters.</td></tr><tr><td align="center" valign="top" class="statText">-</td><td class="statText">Exactly one character in <b>frontSide</b> will be 'S'.</td></tr><tr><td align="center" valign="top" class="statText">-</td><td class="statText"><b>backSide</b> will not contain any 'S' characters.</td></tr><tr><td align="center" valign="top" class="statText">-</td><td class="statText">The total number of 'E' characters in <b>frontSide</b> and <b>backSide</b> will be exactly 1.</td></tr><tr><td colspan="2" class="statText">&#160;</td></tr><tr><td colspan="2" class="statText"><h3>Examples</h3></td></tr><tr><td align="center" nowrap="true" class="statText">0)</td><td class="statText"></td></tr><tr><td class="statText">&#160;&#160;&#160;&#160;</td><td class="statText"><table><tr><td class="statText"><table><tr><td class="statText"><pre>{&quot;...E&quot;,
 &quot;....&quot;,
 &quot;S...&quot;}</pre></td></tr><tr><td class="statText"><pre>{&quot;####&quot;,
 &quot;####&quot;,
 &quot;####&quot;}</pre></td></tr></table></td></tr><tr><td class="statText"><pre>Returns: 5</pre></td></tr><tr><td class="statText"><table><tr><td colspan="2" class="statText">The back of the sheet is full of walls. Therefore, it is not advantageous to fold the sheet at all.</td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true" class="statText">1)</td><td class="statText"></td></tr><tr><td class="statText">&#160;&#160;&#160;&#160;</td><td class="statText"><table><tr><td class="statText"><table><tr><td class="statText"><pre>{&quot;...E&quot;,
 &quot;###.&quot;,
 &quot;S.#.&quot;}</pre></td></tr><tr><td class="statText"><pre>{&quot;....&quot;,
 &quot;....&quot;,
 &quot;....&quot;}</pre></td></tr></table></td></tr><tr><td class="statText"><pre>Returns: 9</pre></td></tr><tr><td class="statText"><table><tr><td colspan="2" class="statText">We can first fold the right side like this:
<pre>
...
##.
S..
</pre>

Then we get to row 0, column 1:

<pre>
.*.
##.
...
</pre>

We may now unfold the maze:

<pre>
.*.E
###.
..#.
</pre>


Nine steps are required in total.</td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true" class="statText">2)</td><td class="statText"></td></tr><tr><td class="statText">&#160;&#160;&#160;&#160;</td><td class="statText"><table><tr><td class="statText"><table><tr><td class="statText"><pre>{&quot;....&quot;,
 &quot;S.#.&quot;,
 &quot;....&quot;}</pre></td></tr><tr><td class="statText"><pre>{&quot;#...&quot;,
 &quot;##.E&quot;,
 &quot;.#.#&quot;}</pre></td></tr></table></td></tr><tr><td class="statText"><pre>Returns: 6</pre></td></tr><tr><td class="statText"><table><tr><td colspan="2" class="statText">This time the exit is on the back of the sheet.<br><br>
1) Go to row 0, column 2:
<pre>
..*.
..#.
....</pre>

2) Fold the left side of the sheet:
<pre>.*.
E#.
#..</pre>

3) Go to the exit.
</td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true" class="statText">3)</td><td class="statText"></td></tr><tr><td class="statText">&#160;&#160;&#160;&#160;</td><td class="statText"><table><tr><td class="statText"><table><tr><td class="statText"><pre>{&quot;....####&quot;,
 &quot;#####..#&quot;,
 &quot;S#.....#&quot;,
 &quot;.#.....#&quot;,
 &quot;.####..#&quot;,
 &quot;....####&quot;}</pre></td></tr><tr><td class="statText"><pre>{&quot;.##..#..&quot;,
 &quot;..#..#..&quot;,
 &quot;#.#..#.E&quot;,
 &quot;#.#..#..&quot;,
 &quot;..#..###&quot;,
 &quot;.##....#&quot;}</pre></td></tr></table></td></tr><tr><td class="statText"><pre>Returns: 20</pre></td></tr><tr><td class="statText"><table><tr><td colspan="2" class="statText">The solution for this case was detailed in the statement. </td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true" class="statText">4)</td><td class="statText"></td></tr><tr><td class="statText">&#160;&#160;&#160;&#160;</td><td class="statText"><table><tr><td class="statText"><table><tr><td class="statText"><pre>{&quot;....####&quot;,
 &quot;#####..#&quot;,
 &quot;S#.....#&quot;,
 &quot;.#.....#&quot;,
 &quot;.####..#&quot;,
 &quot;....####&quot;}</pre></td></tr><tr><td class="statText"><pre>{&quot;.#####.#&quot;,
 &quot;..####..&quot;,
 &quot;#.####.E&quot;,
 &quot;#.####..&quot;,
 &quot;..######&quot;,
 &quot;........&quot;}</pre></td></tr></table></td></tr><tr><td class="statText"><pre>Returns: -1</pre></td></tr><tr><td class="statText"><table><tr><td colspan="2" class="statText">Note that you are not allowed to fold the paper along horizontal lines.</td></tr></table></td></tr></table></td></tr></table><hr><p>This problem statement is the exclusive and proprietary property of TopCoder, Inc.  Any unauthorized use or reproduction of this information without the prior written consent of TopCoder, Inc. is strictly prohibited.  (c)2010, TopCoder, Inc.  All rights reserved.  </p>
                      
                   </td>
                 </tr>
                 <tr>
                   <td colspan="7"><img src="/i/clear.gif" alt="" width="1" height="3" border="0"></td>
                 </tr>
                 <tr>
                   <td background="/i/steel_blue_bg.gif" class="statText" colspan="7"><img src="/i/clear.gif" alt="" width="1" height="5" border="0"></td>
                 </tr>
                 <tr>
                   <td class="statText" colspan="7"><img src="/i/clear.gif" alt="" width="1" height="16" border="0"></td>
                 </tr>
                 <tr>
                   <td class="statText" colspan="7">
                      This problem was used for:
   
   	<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="/tc?module=ProblemDetail&rd=14229&pm=10478">2010 TopCoder High School Round 3 - Division I, Level Two</a>
   
                   
                   </td>
                 </tr>


               </table>
             </td>
           </tr>
           <tr>
             <td width="100%"><img src="/i/clear.gif" alt="" width="1" height="10" border="0"></td>
           </tr>
         </table>
</body>
</html>
