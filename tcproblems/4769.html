<html>
<head>
<title>Â Problem Statement for Springs</title>
</head>
<body>
<table border="0" cellspacing="0" cellpadding="10" width="100%">
           <tr>
             <td valign="top" width="100%"><img src="/i/clear.gif" alt="" width="240" height="1" border="0"><br>
               <table border="0" cellspacing="0" cellpadding="0" width="100%">
                 <tr>
                   <td colspan="7"><img src="/i/clear.gif" alt="" width="1" height="1" border="0"></td>
                 </tr>
                 <tr>
                   <td colspan="7"><img src="/i/clear.gif" alt="" width="1" height="5" border="0"></td>
                 </tr>
                 <tr>
                   
                     <td background="/i/steel_gray_bg.gif" class="statTextBig" colspan="7" height="18">&#160;Problem Statement for Springs</td>
                   
                 </tr>
                 <tr>
                   <td colspan="7"><img src="/i/clear.gif" alt="" width="1" height="1" border="0"></td>
                 </tr>
                 <tr>
                   <td colspan="7"><img src="/i/clear.gif" alt="" width="1" height="1" border="0"></td>
                 </tr>
                 <tr>
                   <td class="problemText" valign="middle" align="left">
                      
              		<table><tr><td colspan="2" class="statText"><h3>Problem Statement</h3></td></tr><tr><td class="statText">&#160;&#160;&#160;&#160;</td><td class="statText">Consider a group of metal springs supporting a rigid rod.  

The rod's weight is
uniformly distributed along its length at a rate of 1 pound per inch.  Each of
the springs exerts an upwards force when it is compressed.  This force is given
by <tt>F<sub>i</sub> = k<sub>i</sub>*x<sub>i</sub>+1/(max<sub>i</sub>-x<sub>i</sub>)<sup>2</sup></tt> where F<sub>i</sub> is the force, x<sub>i</sub> is the amount the spring
is compressed (x<sub>i</sub> may be negative, in which case the spring is extended and the
force may be downward), and max<sub>i</sub> and k<sub>i</sub> are inputs.  Notice that as the compression approaches max, the force goes to infinity, so the spring will never be compressed by max or more.  Given the positions, k's, and max's for the springs supporting the rod (corresponding elements of the inputs represent one spring), you are to determine how much each
spring is compressed by the rod.  You may assume that the leftmost spring
supports the leftmost end of the rod, while the rightmost spring supports the
rightmost end of the rod.  Note that some of the springs may be negatively
compressed (see examples).  <br><br>
There are three basic conditions that must be fulfilled by the compressions of
the springs.  First, the total force exerted upwards (the sum of the F's) must
equal the weight of the rod.  Second, since the rod is rigid, the compressions
of the springs must be such that the tops of the springs are all in a line (with
some constant slope).  Third, the sum of the torques around every point where
the rod touches a spring must be 0.  The torques come from both the upward (or downward)
forces exerted by the springs, and also from the weight of the rod.  The torque
around a point due to a spring is equal to the force exerted by the spring times
the horizontal distance from the spring to the point.  The torque around a point caused by
the weight of the rod to the right of the point is equal to the weight of the portion of the rod to the right squared, and then divided by 2.  The left side of the point is analogous.  See examples for more information.
</td></tr><tr><td colspan="2" class="statText">&#160;</td></tr><tr><td colspan="2" class="statText"><h3>Definition</h3></td></tr><tr><td class="statText">&#160;&#160;&#160;&#160;</td><td class="statText"><table><tr><td class="statText">Class:</td><td class="statText">Springs</td></tr><tr><td class="statText">Method:</td><td class="statText">compression</td></tr><tr><td class="statText">Parameters:</td><td class="statText">int[], int[], int[]</td></tr><tr><td class="statText">Returns:</td><td class="statText">double[]</td></tr><tr><td class="statText">Method signature:</td><td class="statText">double[] compression(int[] positions, int[] ks, int[] maxs)</td></tr><tr><td colspan="2" class="statText">(be sure your method is public)</td></tr></table></td></tr><tr><td class="statText">&#160;&#160;&#160;&#160;</td></tr><tr><td class="statText"></td></tr><tr><td colspan="2" class="statText">&#160;</td></tr><tr><td colspan="2" class="statText"><h3>Notes</h3></td></tr><tr><td align="center" valign="top" class="statText">-</td><td class="statText">In reality, the rotation of the rod would result in some more complicated effects which we will ignore for this problem. </td></tr><tr><td align="center" valign="top" class="statText">-</td><td class="statText">When none of the springs are compressed at all, their tops form a horizontal line.</td></tr><tr><td colspan="2" class="statText">&#160;</td></tr><tr><td colspan="2" class="statText"><h3>Constraints</h3></td></tr><tr><td align="center" valign="top" class="statText">-</td><td class="statText"><b>positions</b>, <b>ks</b> and <b>maxs</b> will each contain between 2 and 50 elements, inclusive.</td></tr><tr><td align="center" valign="top" class="statText">-</td><td class="statText"><b>positions</b>, <b>ks</b> and <b>maxs</b> will each contain the same number of elements.</td></tr><tr><td align="center" valign="top" class="statText">-</td><td class="statText"><b>positions</b> will be sorted in strictly ascending order.</td></tr><tr><td align="center" valign="top" class="statText">-</td><td class="statText">Each element of <b>positions</b> will be between 0 and 1000, inclusive.</td></tr><tr><td align="center" valign="top" class="statText">-</td><td class="statText">Each element of <b>maxs</b> and <b>ks</b> will be between 1 and 1000, inclusive.</td></tr><tr><td colspan="2" class="statText">&#160;</td></tr><tr><td colspan="2" class="statText"><h3>Examples</h3></td></tr><tr><td align="center" nowrap="true" class="statText">0)</td><td class="statText"></td></tr><tr><td class="statText">&#160;&#160;&#160;&#160;</td><td class="statText"><table><tr><td class="statText"><table><tr><td class="statText"><pre>{0,1,3}
</pre></td></tr><tr><td class="statText"><pre>{1,1,1}
</pre></td></tr><tr><td class="statText"><pre>{1000,1000,1000}</pre></td></tr></table></td></tr><tr><td class="statText"><pre>Returns: {0.857141855426, 0.964284712354, 1.17857042621 }</pre></td></tr><tr><td class="statText"><table><tr><td colspan="2" class="statText"><img src="http://www.topcoder.com/contest/problem/Springs/springs.png">
<br>The image above shows the approximate setup of the springs and rod.  The values in <b>maxs</b> are large enough that we can ignore them in this discussion and our results won't be far off.  The first spring is compressed by 6/7, the second by 27/28, and the third by 33/28.  You will note that the sum of these three compressions is 3.  Furthermore, the slope of the rod (3/28) matches the compression of the springs.  Finally, we can calculate the torque at each location (negative values indicate counterclockwise torque):
<pre>
                        Torque due to:
Position | Spring 0 | Spring 1 | Spring 2 | Weight of Left | Weight of Right
---------+----------+----------+----------+----------------+----------------
       0 |        0 | -27/28*1 | -33/28*3 |              0 | 3*3/2 = 9/2
       1 |  6/7 * 1 |        0 | -33/28*2 |    -1*1/2=-1/2 | 2*2/2 = 2
       3 |  6/7 * 3 |  27/28*2 |        0 |    -3*3/2=-9/2 | 0
</pre>
You can easily verify that the sum of the torques at each of the three positions is 0.<br><br>When you solve the problem taking <b>max</b> into account, you find that each of the above values is approximately one millionth too high.</td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true" class="statText">1)</td><td class="statText"></td></tr><tr><td class="statText">&#160;&#160;&#160;&#160;</td><td class="statText"><table><tr><td class="statText"><table><tr><td class="statText"><pre>{0,1,2,4}</pre></td></tr><tr><td class="statText"><pre>{2,1,1,1}</pre></td></tr><tr><td class="statText"><pre>{1,10,10,10}</pre></td></tr></table></td></tr><tr><td class="statText"><pre>Returns: {0.066863594314, 0.421263093855, 0.775662593396, 1.484461592477 }</pre></td></tr><tr><td class="statText"></td></tr></table></td></tr><tr><td align="center" nowrap="true" class="statText">2)</td><td class="statText"></td></tr><tr><td class="statText">&#160;&#160;&#160;&#160;</td><td class="statText"><table><tr><td class="statText"><table><tr><td class="statText"><pre>{1,99,101}</pre></td></tr><tr><td class="statText"><pre>{1,100,100}</pre></td></tr><tr><td class="statText"><pre>{1000,1000,1000}</pre></td></tr></table></td></tr><tr><td class="statText"><pre>Returns: {48.510296857713, 0.744851008845, -0.229954008478 }</pre></td></tr><tr><td class="statText"></td></tr></table></td></tr><tr><td align="center" nowrap="true" class="statText">3)</td><td class="statText"></td></tr><tr><td class="statText">&#160;&#160;&#160;&#160;</td><td class="statText"><table><tr><td class="statText"><table><tr><td class="statText"><pre>{0,1000}</pre></td></tr><tr><td class="statText"><pre>{1,1000}</pre></td></tr><tr><td class="statText"><pre>{1,1000}</pre></td></tr></table></td></tr><tr><td class="statText"><pre>Returns: {0.955235859695, 0.499999998999 }</pre></td></tr><tr><td class="statText"></td></tr></table></td></tr></table><hr><p>This problem statement is the exclusive and proprietary property of TopCoder, Inc.  Any unauthorized use or reproduction of this information without the prior written consent of TopCoder, Inc. is strictly prohibited.  (c)2010, TopCoder, Inc.  All rights reserved.  </p>
                      
                   </td>
                 </tr>
                 <tr>
                   <td colspan="7"><img src="/i/clear.gif" alt="" width="1" height="3" border="0"></td>
                 </tr>
                 <tr>
                   <td background="/i/steel_blue_bg.gif" class="statText" colspan="7"><img src="/i/clear.gif" alt="" width="1" height="5" border="0"></td>
                 </tr>
                 <tr>
                   <td class="statText" colspan="7"><img src="/i/clear.gif" alt="" width="1" height="16" border="0"></td>
                 </tr>
                 <tr>
                   <td class="statText" colspan="7">
                      This problem was used for:
   
   	<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="/tc?module=ProblemDetail&rd=8016&pm=4769">2005 TCO Online Round 3 - Division I, Level Three</a>
   
   	<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="/tc?module=ProblemDetail&rd=8058&pm=4769">2005 TCO Sponsor Track Round 3 - Division I, Level Three</a>
   
                   
                   </td>
                 </tr>


               </table>
             </td>
           </tr>
           <tr>
             <td width="100%"><img src="/i/clear.gif" alt="" width="1" height="10" border="0"></td>
           </tr>
         </table>
</body>
</html>
