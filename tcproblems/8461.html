<html>
<head>
<title>Â Problem Statement for TreeMaps</title>
</head>
<body>
<table border="0" cellspacing="0" cellpadding="10" width="100%">
           <tr>
             <td valign="top" width="100%"><img src="/i/clear.gif" alt="" width="240" height="1" border="0"><br>
               <table border="0" cellspacing="0" cellpadding="0" width="100%">
                 <tr>
                   <td colspan="7"><img src="/i/clear.gif" alt="" width="1" height="1" border="0"></td>
                 </tr>
                 <tr>
                   <td colspan="7"><img src="/i/clear.gif" alt="" width="1" height="5" border="0"></td>
                 </tr>
                 <tr>
                   
                     <td background="/i/steel_gray_bg.gif" class="statTextBig" colspan="7" height="18">&#160;Problem Statement for TreeMaps</td>
                   
                 </tr>
                 <tr>
                   <td colspan="7"><img src="/i/clear.gif" alt="" width="1" height="1" border="0"></td>
                 </tr>
                 <tr>
                   <td colspan="7"><img src="/i/clear.gif" alt="" width="1" height="1" border="0"></td>
                 </tr>
                 <tr>
                   <td class="problemText" valign="middle" align="left">
                      
              		<table><tr><td colspan="2" class="statText"><h3>Problem Statement</h3></td></tr><tr><td class="statText">&#160;&#160;&#160;&#160;</td><td class="statText"><p>At our company, the hard drive capacity of the file servers is very small, which forces the administrators to delete files frequently to recover hard disk space. Some time ago, they used the operating system interface to traverse the file system from the root directory to the files, deleting big old files in the process.</p><br> 

<p>The file system is structured as a rooted tree, specified by <b>parent</b>, <b>size</b> and <b>type</b>. The ID of a node is its 0-based position inside <b>parent</b>. For example, the 3rd node has ID=3. The k-th node is a file if <b>type</b>[k] is <tt>'F'</tt> and is a directory if <b>type</b>[k] is <tt>'D'</tt>.  The parent of the k-th node is the <b>parent</b>[k]-th node, which is guaranteed to be a directory. The tree's root is node <tt>0</tt> and its parent is <tt>-1</tt>, indicating that it is not contained inside any other node. Finally, if the k-th node is a file, its size is <b>size</b>[k]; if the k-th node is a directory, <b>size</b>[k] will be equal to the sum of the sizes of its immediate child nodes.</p><br>

<p>Last week, a graphical interface to look at the entire file system at once was released. In this interface, a rectangle of <b>width</b> x <b>height</b> units with its lower-left corner at (0,0) and its upper-right corner at (<b>width</b>, <b>height</b>) is split horizontally between directories and files contained by the root directory. Then, each root's subdirectory is split vertically between its children, and so on, switching the split direction at each level. To split a rectangle horizontally, split its width between its children proportionally to their sizes, ordering the children left to right in increasing order by ID. To split a rectangle vertically, split its height between its children proportionally to their sizes, ordering the children from bottom to top in increasing order by ID.</p><br>

<p>For example, given the following file system structure (see example 0):</p><br>

<p><center><img src="http://www.topcoder.com/contest/problem/TreeMaps/Tree1.png"></center></p><br>

<p>Then, given the blue rectangle with <b>width</b>=20 and <b>height</b>=8, the root node divides it between all its children, giving the directory 3 a bigger part because its total size is greater than the files 1, 2 and 8. This division is made horizontally, where the x axis goes from left to right. This division can be seen in the following image:</p><br>

<p><center><img src="http://www.topcoder.com/contest/problem/TreeMaps/Blue_Division1.png"></center></p><br>

<p>Then, the directory 3 divides its red rectangle between its children, ordering them from bottom to top in increasing order by ID. This division is made vertically, where the y axis goes from bottom to top. This division can be seen in the following image:</p><br>

<p><center><img src="http://www.topcoder.com/contest/problem/TreeMaps/Red_Division1.png"></center></p><br>

<p>When an administrator clicks a file's rectangle, the file is erased and the rectangles are recalculated. Given the position of many clicks made by an administrator, return a int[] with the same number of elements as <b>px</b>, where the k-th element is the ID of the file erased by the click made at (<b>px</b>[k], <b>py</b>[k]). It is guaranteed that the administrator always clicks strictly inside some file's rectangle.</p><br>
</td></tr><tr><td colspan="2" class="statText">&#160;</td></tr><tr><td colspan="2" class="statText"><h3>Definition</h3></td></tr><tr><td class="statText">&#160;&#160;&#160;&#160;</td><td class="statText"><table><tr><td class="statText">Class:</td><td class="statText">TreeMaps</td></tr><tr><td class="statText">Method:</td><td class="statText">eraseFiles</td></tr><tr><td class="statText">Parameters:</td><td class="statText">String, int[], int[], int, int, int[], int[]</td></tr><tr><td class="statText">Returns:</td><td class="statText">int[]</td></tr><tr><td class="statText">Method signature:</td><td class="statText">int[] eraseFiles(String type, int[] parent, int[] size, int width, int height, int[] px, int[] py)</td></tr><tr><td colspan="2" class="statText">(be sure your method is public)</td></tr></table></td></tr><tr><td class="statText">&#160;&#160;&#160;&#160;</td></tr><tr><td class="statText"></td></tr><tr><td colspan="2" class="statText">&#160;</td></tr><tr><td colspan="2" class="statText"><h3>Constraints</h3></td></tr><tr><td align="center" valign="top" class="statText">-</td><td class="statText"><b>type</b> will contain N elements, where N is between <tt>2</tt> and <tt>50</tt>, inclusive.</td></tr><tr><td align="center" valign="top" class="statText">-</td><td class="statText">Each character of <b>type</b> will be either <tt>'F'</tt> or <tt>'D'</tt>.</td></tr><tr><td align="center" valign="top" class="statText">-</td><td class="statText">At least one character in <b>type</b> will be <tt>'F'</tt>.</td></tr><tr><td align="center" valign="top" class="statText">-</td><td class="statText">The first character of <b>type</b> will be <tt>'D'</tt>.</td></tr><tr><td align="center" valign="top" class="statText">-</td><td class="statText"><b>parent</b> will contain exactly N elements.</td></tr><tr><td align="center" valign="top" class="statText">-</td><td class="statText">Each element of <b>parent</b> will be between <tt>0</tt> and N-1, inclusive, except for the first element which will be equal to <tt>-1</tt>.</td></tr><tr><td align="center" valign="top" class="statText">-</td><td class="statText">Each node that appears in <b>parent</b> will be a directory.</td></tr><tr><td align="center" valign="top" class="statText">-</td><td class="statText">The structure defined by <b>parent</b> will be a rooted tree at 0. This means that there will be no cycles and all nodes can reach the root by following the parent links.</td></tr><tr><td align="center" valign="top" class="statText">-</td><td class="statText"><b>size</b> will contain exactly N elements.</td></tr><tr><td align="center" valign="top" class="statText">-</td><td class="statText">Each element of <b>size</b> will be between <tt>1</tt> and <tt>1000</tt>, inclusive.</td></tr><tr><td align="center" valign="top" class="statText">-</td><td class="statText">Each element of <b>size</b> where the corresponding element of <b>type</b> is 'D' will be equal to the sum of the sizes of its children.</td></tr><tr><td align="center" valign="top" class="statText">-</td><td class="statText"><b>width</b> will between <tt>2</tt> and <tt>1000</tt>, inclusive.</td></tr><tr><td align="center" valign="top" class="statText">-</td><td class="statText"><b>height</b> will between <tt>2</tt> and <tt>1000</tt>, inclusive.</td></tr><tr><td align="center" valign="top" class="statText">-</td><td class="statText"><b>px</b> will contain M elements, where M is between <tt>1</tt> and the number of <tt>'F'</tt>s in <b>type</b>, inclusive.</td></tr><tr><td align="center" valign="top" class="statText">-</td><td class="statText">Each element of <b>px</b> will be between 0 and <b>width</b>, exclusive.</td></tr><tr><td align="center" valign="top" class="statText">-</td><td class="statText"><b>py</b> will contain exactly M elements.</td></tr><tr><td align="center" valign="top" class="statText">-</td><td class="statText">Each element of <b>py</b> will be between 0 and <b>height</b>, exclusive.</td></tr><tr><td align="center" valign="top" class="statText">-</td><td class="statText">There will be no k such that the point (<b>px</b>[k], <b>py</b>[k]) lies at a distance less than 1E-6 from a file rectangle's border.</td></tr><tr><td colspan="2" class="statText">&#160;</td></tr><tr><td colspan="2" class="statText"><h3>Examples</h3></td></tr><tr><td align="center" nowrap="true" class="statText">0)</td><td class="statText"></td></tr><tr><td class="statText">&#160;&#160;&#160;&#160;</td><td class="statText"><table><tr><td class="statText"><table><tr><td class="statText"><pre>&quot;DFFDFFFFF&quot;</pre></td></tr><tr><td class="statText"><pre>{-1, 0, 0, 0, 3, 3, 3, 3, 0}</pre></td></tr><tr><td class="statText"><pre>{10, 2, 2, 4, 1, 1, 1, 1, 2}</pre></td></tr><tr><td class="statText"><pre>20</pre></td></tr><tr><td class="statText"><pre>8</pre></td></tr><tr><td class="statText"><pre>{12, 12}</pre></td></tr><tr><td class="statText"><pre>{1, 4}</pre></td></tr></table></td></tr><tr><td class="statText"><pre>Returns: {4, 6 }</pre></td></tr><tr><td class="statText"><table><tr><td colspan="2" class="statText">The file system structure and the initial division of this example can be seen in the problem statement. Observe that after erasing file 4 with the first click, the image is recalculated and the point (12,4) is not in a rectangle's boundary anymore.</td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true" class="statText">1)</td><td class="statText"></td></tr><tr><td class="statText">&#160;&#160;&#160;&#160;</td><td class="statText"><table><tr><td class="statText"><table><tr><td class="statText"><pre>&quot;DFFDFFFFF&quot;</pre></td></tr><tr><td class="statText"><pre>{-1, 0, 0, 0, 3, 3, 3, 3, 0}</pre></td></tr><tr><td class="statText"><pre>{10, 2, 2, 4, 1, 1, 1, 1, 2}</pre></td></tr><tr><td class="statText"><pre>20</pre></td></tr><tr><td class="statText"><pre>8</pre></td></tr><tr><td class="statText"><pre>{12, 12, 12, 12, 12}</pre></td></tr><tr><td class="statText"><pre>{1, 1, 1, 1, 1}</pre></td></tr></table></td></tr><tr><td class="statText"><pre>Returns: {4, 5, 6, 7, 2 }</pre></td></tr><tr><td class="statText"><table><tr><td colspan="2" class="statText">The file system structure and the initial division of this example can be seen in the problem statement. The first four clicks erase all the files in directory 3. Note that after clearing a directory, the system gives it no area, so the fifth click erases file 2.</td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true" class="statText">2)</td><td class="statText"></td></tr><tr><td class="statText">&#160;&#160;&#160;&#160;</td><td class="statText"><table><tr><td class="statText"><table><tr><td class="statText"><pre>&quot;DDDFFDFFF&quot;</pre></td></tr><tr><td class="statText"><pre>{-1, 0, 0, 1, 1, 2, 2, 5, 5}</pre></td></tr><tr><td class="statText"><pre>{10, 4, 6, 2, 2, 5, 1, 2, 3}</pre></td></tr><tr><td class="statText"><pre>50</pre></td></tr><tr><td class="statText"><pre>50</pre></td></tr><tr><td class="statText"><pre>{16, 41, 32}</pre></td></tr><tr><td class="statText"><pre>{10, 38, 29}</pre></td></tr></table></td></tr><tr><td class="statText"><pre>Returns: {3, 8, 7 }</pre></td></tr><tr><td class="statText"><table><tr><td colspan="2" class="statText"></td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true" class="statText">3)</td><td class="statText"></td></tr><tr><td class="statText">&#160;&#160;&#160;&#160;</td><td class="statText"><table><tr><td class="statText"><table><tr><td class="statText"><pre>&quot;DFFFFD&quot;</pre></td></tr><tr><td class="statText"><pre>{-1, 5, 5, 5, 5, 0}</pre></td></tr><tr><td class="statText"><pre>{10, 4, 2, 3, 1, 10}</pre></td></tr><tr><td class="statText"><pre>20</pre></td></tr><tr><td class="statText"><pre>20</pre></td></tr><tr><td class="statText"><pre>{1, 1}</pre></td></tr><tr><td class="statText"><pre>{2, 18}</pre></td></tr></table></td></tr><tr><td class="statText"><pre>Returns: {1, 4 }</pre></td></tr><tr><td class="statText"><table><tr><td colspan="2" class="statText"></td></tr></table></td></tr></table></td></tr></table><hr><p>This problem statement is the exclusive and proprietary property of TopCoder, Inc.  Any unauthorized use or reproduction of this information without the prior written consent of TopCoder, Inc. is strictly prohibited.  (c)2010, TopCoder, Inc.  All rights reserved.  </p>
                      
                   </td>
                 </tr>
                 <tr>
                   <td colspan="7"><img src="/i/clear.gif" alt="" width="1" height="3" border="0"></td>
                 </tr>
                 <tr>
                   <td background="/i/steel_blue_bg.gif" class="statText" colspan="7"><img src="/i/clear.gif" alt="" width="1" height="5" border="0"></td>
                 </tr>
                 <tr>
                   <td class="statText" colspan="7"><img src="/i/clear.gif" alt="" width="1" height="16" border="0"></td>
                 </tr>
                 <tr>
                   <td class="statText" colspan="7">
                      This problem was used for:
   
   	<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="/tc?module=ProblemDetail&rd=13678&pm=8461">2008 TopCoder China Tournament Round 2 - Division I, Level Three</a>
   
                   
                   </td>
                 </tr>


               </table>
             </td>
           </tr>
           <tr>
             <td width="100%"><img src="/i/clear.gif" alt="" width="1" height="10" border="0"></td>
           </tr>
         </table>
</body>
</html>
